(window["webpackJsonp_能力商城控制台"]=window["webpackJsonp_能力商城控制台"]||[]).push([["manifest"],{"01ca":function(e,t,a){},"06fe":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("319b"),n=a.n(l);const b={class:"nodata-box"},s=[(e=>(Object(c.K)("data-v-44d99e75"),e=e(),Object(c.I)(),e))(()=>Object(c.n)("div",{class:"empty"},[Object(c.n)("img",{src:n.a,alt:""}),Object(c.n)("span",null,"请选择用户组")],-1))];var r={setup(){}},o=(a("57cd"),a("6b0d"));const i=a.n(o)()(r,[["render",function(e,t,a,l,n,r){return Object(c.H)(),Object(c.m)("div",b,s)}],["__scopeId","data-v-44d99e75"]]);t.default=i},"0935":function(e,t,a){},"0fc4":function(e,t,a){"use strict";a("0935")},"14a2":function(e,t,a){},1589:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("6c02");const n={class:"tip-box"};var b={__name:"CusTip",props:{message:{type:String,default:""}},setup(e){const t=e;return Object(c.W)(t),(t,a)=>(Object(c.H)(),Object(c.m)("div",n,Object(c.T)(e.message),1))}},s=(a("0fc4"),a("6b0d")),r=a.n(s);var o=r()(b,[["__scopeId","data-v-666a7bcc"]]),i=a("47ce"),d=a("e9d5");const u=[{label:"默认排序",value:"1"},{label:"所属组织",value:"2"},{label:"加入时间",value:"3"}],O=e=>(Object(c.K)("data-v-09711b18"),e=e(),Object(c.I)(),e),j={class:"list-head"},p=["title"],m=O(()=>Object(c.n)("div",{class:"cus-input"},null,-1)),f={class:"right-handle"},g=Object(c.p)(" 排序: "),v=O(()=>Object(c.n)("span",{class:"add-label"},"添加成员",-1)),h=Object(c.p)("      "),y=Object(c.p)("批量删除");var _={__name:"listHeadCom",props:{titleName:{type:String,default:""}},emits:["patchDelete","getList","addUser"],setup(e,t){let{emit:a}=t;const l=e,n=Object(c.r)({components:{PlusOutlined:i.a,SearchOutlined:d.a}}),{titleName:b}=Object(c.W)(l),s=Object(c.M)("1"),r=Object(c.M)(""),o=()=>{a("addUser")},O=()=>{a("patchDelete")},_=e=>{r.value=e.target.value},q=()=>{a("getList",{sort:s.value,name:r.value})},C=e=>{s.value=e,a("getList",{sort:parseInt(s.value),name:r.value})};return Object(c.W)(n),(e,t)=>{const a=Object(c.Q)("a-input"),l=Object(c.Q)("a-select-option"),n=Object(c.Q)("a-select"),X=Object(c.Q)("a-button");return Object(c.H)(),Object(c.m)("div",j,[Object(c.n)("div",{class:"title",title:Object(c.X)(b)},Object(c.T)(Object(c.X)(b)),9,p),m,Object(c.n)("div",f,[Object(c.q)(a,{value:r.value,"onUpdate:value":t[0]||(t[0]=e=>r.value=e),onChange:_,onPressEnter:q,style:{width:"200px","margin-right":"20px"},placeholder:"搜索成员名称"},{suffix:Object(c.cb)(()=>[Object(c.q)(Object(c.X)(d.a),{onClick:q})]),_:1},8,["value"]),Object(c.n)("div",null,[g,Object(c.q)(n,{ref:"select",value:s.value,"onUpdate:value":t[1]||(t[1]=e=>s.value=e),style:{width:"120px"},onChange:C,class:"sort",getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(u),(e,t)=>(Object(c.H)(),Object(c.k)(l,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),Object(c.q)(X,{onClick:o,type:"primary",class:"add-btn"},{icon:Object(c.cb)(()=>[Object(c.q)(Object(c.X)(i.a))]),default:Object(c.cb)(()=>[v]),_:1}),h,Object(c.q)(X,{onClick:O,class:"btn"},{default:Object(c.cb)(()=>[y]),_:1})])])}}};a("63c1");var q=r()(_,[["__scopeId","data-v-09711b18"]]),C=(a("cd17"),a("ed3b")),X=a("96d9"),L=a("4820"),S=a("5502"),w=a("986e");const k={key:0,class:"selection-handle"},x=Object(c.p)("移出用户组"),N=Object(c.p)("    "),U=Object(c.p)("取消"),D={key:0,class:"table-edit"},I=["onClick"];var M={__name:"listTableCom",props:{selectionShow:{type:Boolean,default:!1},tableLoading:{type:Boolean,default:!1},dataSourceList:{type:Array,default:()=>[]},pagination:{type:Object},titleName:{type:String}},emits:["patchDeleteCancel","getList"],setup(e,t){let{expose:a,emit:l}=t;const n=e;let b=Object(S.b)();const s=[{title:"成员",dataIndex:"realName",key:"realName",width:100},{title:"手机号",dataIndex:"phone",key:"phone",width:120},{title:"邮箱",dataIndex:"email",key:"email",width:150},{title:"员工类型",dataIndex:"type",key:"type",width:90,customRender:e=>{let{text:t}=e;return 0===t?"成员":"负责人"}},{title:"所属组织",dataIndex:"companyName",key:"companyName"},{title:"工作地",dataIndex:"address",key:"address"},{title:"操作",dataIndex:"operation",key:"operation",width:140}],{selectionShow:r,dataSourceList:o,pagination:i,tableLoading:d,titleName:u}=Object(c.W)(n),O=Object(c.L)({selectedKeys:[],selectedRowKeys:[]}),j=Object(c.M)(),p=e=>{O.selectedRowKeys=e;const t=o.value.map(e=>e),a=O.selectedKeys.map(e=>e);for(let c=0;c<t.length;c++){const l=a.findIndex(e=>e.id===t[c].id),n=e.findIndex(e=>e===t[c].id);l>-1&&-1===n?a.splice(l,1):-1===l&&n>-1&&a.push(t[c])}O.selectedKeys=a},m=()=>{O.selectedRowKeys=[],O.selectedKeys=[]},f=e=>{l("getList",{page:e.current,pageSize:e.pageSize}),O.selectedRowKeys=O.selectedKeys.map(e=>e.id)},g=e=>{Object(L.a)(e).then(e=>{e.success&&(w.a.$emit("pop",{type:"success",msg:"移除成员成功"}),l("getList",{}),h(),b.dispatch("getGroupListActions"))})},v=()=>{if(!O.selectedKeys.length)return w.a.$emit("pop",{type:"warning",msg:"选中用户组不能为空"}),!1;const e=O.selectedKeys[0].realName;C.a.confirm({title:"移出用户组",icon:Object(c.q)(X.a,{style:"color: #469ffb;"},null),content:Object(c.q)("span",null,[Object(c.q)("span",null,`是否将【${e}${O.selectedKeys.length>1?"等":""}`),Object(c.q)("span",{style:"color: #469ffb;"},""+(O.selectedKeys.length>1?O.selectedKeys.length:"")),Object(c.q)("span",null,`${O.selectedKeys.length>1?"人":""}】移出【${u.value}】用户组？`)]),getContainer:()=>j.value,onOk(){const e=O.selectedKeys.map(e=>e.id);g(e)},onCancel(){}})},h=()=>{l("patchDeleteCancel"),m()};return a({clearSelectionData:m}),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-table");return Object(c.H)(),Object(c.m)("div",{id:"user-group-table",ref_key:"userGroupTableRef",ref:j},[Object(c.X)(r)?(Object(c.H)(),Object(c.m)("div",k,[Object(c.n)("div",null,"已经选择"+Object(c.T)(O.selectedKeys.length)+"人",1),Object(c.n)("div",null,[Object(c.q)(a,{onClick:v,size:"small",type:"primary",class:"remove-btn"},{default:Object(c.cb)(()=>[x]),_:1}),N,Object(c.q)(a,{onClick:h,size:"small",class:"remove-btn"},{default:Object(c.cb)(()=>[U]),_:1})])])):Object(c.l)("",!0),Object(c.q)(l,{"row-selection":Object(c.X)(r)?{selectedRowKeys:O.selectedRowKeys,onChange:p}:null,dataSource:Object(c.X)(o),columns:s,loading:Object(c.X)(d),onChange:f,rowKey:e=>e.id,class:"list-table",pagination:{pageSize:Object(c.X)(i).pageSize,pageNum:Object(c.X)(i).page,total:Object(c.X)(i).total,showQuickJumper:!0,showSizeChanger:!0,showTotal:(e,t)=>`共${e}条`,pageSizeOptions:["10","50","100"]}},{bodyCell:Object(c.cb)(e=>{let{column:t,text:a,record:l}=e;return["operation"===t.dataIndex?(Object(c.H)(),Object(c.m)("div",D,[Object(c.n)("span",{onClick:e=>(e=>{C.a.confirm({title:"移出用户组："+e.realName,icon:Object(c.q)(X.a,{style:"color: #469ffb;"},null),content:`是否将【${e.realName}】移出【${u.value}】用户组？`,getContainer:()=>j.value,onOk(){g([e.id])},onCancel(){}})})(l)},"移出用户组",8,I)])):Object(c.l)("",!0)]}),_:1},8,["row-selection","dataSource","loading","rowKey","pagination"])],512)}}};a("2f11");var T=r()(M,[["__scopeId","data-v-473c143c"]]),A=(a("caad"),a("b775"));var Q=a("85b1"),$=a("5b2e"),K=a("5a0c"),H=a.n(K);const P={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{message:"手机号格式不正确",trigger:"blur",pattern:/^1[2-9]\d{9}$/}],type:[{required:!0,message:"请选择员工类型",trigger:"blur"}],credentialsType:[{required:!0,message:"请选择证件类型",trigger:"change"}],credentialsNo:[{required:!0,message:"请输入身份证号",trigger:"blur"},{message:"身份证号格式不正确",trigger:"blur",pattern:/(^\d{18}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/}],email:[{type:"email",required:!0,message:"请输入邮箱",trigger:"blur"}],orgCode:[{required:!0,message:"请选择所属组织",trigger:"change"}]},R={span:6},z={span:18},E=[{label:"合作伙伴",value:1}],G=[{label:"身份证",value:1}],Y=Object(c.L)({company:[]}),F=Object(c.L)({credentialsType:1,type:1,effectiveTime:H()(new Date),invalidTime:H()().add(1,"year").endOf("day")}),V=e=>e<H()(F.effectiveTime).endOf("day")||e>H()(F.effectiveTime).add(1,"year").endOf("day"),W=()=>{(async function(e){return Object(A.a)({url:"appStore/v1.0/dashboard/getOrgList",method:"post",data:e})})().then(e=>{Y.company=e.data})};const B=Object(c.p)(" 保存 "),J=Object(c.p)(" 取消 "),Z={class:"form"},ee=Object(c.p)(" 男 "),te=Object(c.p)(" 女 ");var ae={__name:"AddNewUser",props:{modelVisible:{type:Boolean,default:!1}},emits:["modelCancel"],setup(e,t){let{emit:a}=t;const l=e,{rules:n,labelCol:b,wrapperCol:s,type:r,certificate:o,defForm:i,defState:d,disabledEndDate:u,getOrgListFun:O}={rules:P,labelCol:R,wrapperCol:z,type:E,certificate:G,defForm:F,defState:Y,disabledEndDate:V,getOrgListFun:W},j=Object(c.M)(),p=Object(c.M)(),m=Object(c.i)({get:()=>l.modelVisible,set:()=>{}}),f=Object(Q.a)(()=>{j.value.validateFields().then(e=>{(async function(e){return Object(A.a)({url:"appStore/v1.0/dashboard/addStoreUser",method:"post",data:e})})(Object.assign({},e,{effectiveTime:H()(i.effectiveTime).format("YYYY-MM-DD"),invalidTime:H()(i.invalidTime).format("YYYY-MM-DD")})).then(e=>{e.success?(w.a.$emit("pop",{type:"success",msg:"保存成功"}),this.handleCancel()):w.a.$emit("pop",{type:"error",msg:e.msg})})})},300),g=()=>{j.value.resetFields(),a("modelCancel")};return Object(c.E)(()=>{O()}),Object(c.W)(d),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-input"),O=Object(c.Q)("a-form-item"),v=Object(c.Q)("a-col"),h=Object(c.Q)("a-radio"),y=Object(c.Q)("a-radio-group"),_=Object(c.Q)("a-row"),q=Object(c.Q)("a-select-option"),C=Object(c.Q)("a-select"),X=Object(c.Q)("a-date-picker"),L=Object(c.Q)("a-form"),S=Object(c.Q)("a-modal");return Object(c.H)(),Object(c.m)(c.b,null,[Object(c.n)("div",{id:"new-user-modal",ref_key:"newUserModalRef",ref:p},null,512),Object(c.q)(S,{visible:Object(c.X)(m),"onUpdate:visible":t[10]||(t[10]=e=>Object(c.v)(m)?m.value=e:null),title:"添加成员",width:838,onCancel:g,getContainer:()=>e.$refs.newUserModalRef},{footer:Object(c.cb)(()=>[Object(c.q)(a,{type:"primary",onClick:Object(c.X)(f)},{default:Object(c.cb)(()=>[B]),_:1},8,["onClick"]),Object(c.q)(a,{onClick:g},{default:Object(c.cb)(()=>[J]),_:1})]),default:Object(c.cb)(()=>[Object(c.n)("div",Z,[Object(c.q)(L,{ref_key:"newUserFormRef",ref:j,model:Object(c.X)(i),"label-col":Object(c.X)(b),"wrapper-col":Object(c.X)(s),rules:Object(c.X)(n)},{default:Object(c.cb)(()=>[Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(v,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"姓名：",name:"name"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).name,"onUpdate:value":t[0]||(t[0]=e=>Object(c.X)(i).name=e),placeholder:"请输入姓名",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(v,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"性别：",name:"sex"},{default:Object(c.cb)(()=>[Object(c.q)(y,{value:Object(c.X)(i).sex,"onUpdate:value":t[1]||(t[1]=e=>Object(c.X)(i).sex=e)},{default:Object(c.cb)(()=>[Object(c.q)(h,{value:"2"},{default:Object(c.cb)(()=>[ee]),_:1}),Object(c.q)(h,{value:"1"},{default:Object(c.cb)(()=>[te]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(v,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"手机号：",name:"phone"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).phone,"onUpdate:value":t[2]||(t[2]=e=>Object(c.X)(i).phone=e),placeholder:"请输入手机号",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(v,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"员工类型：",name:"type"},{default:Object(c.cb)(()=>[Object(c.q)(C,{value:Object(c.X)(i).type,"onUpdate:value":t[3]||(t[3]=e=>Object(c.X)(i).type=e),getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(r),(e,t)=>(Object(c.H)(),Object(c.k)(q,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(v,{span:6},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"证件号：",name:"credentialsType","label-col":{span:12},"wrapper-col":{span:12}},{default:Object(c.cb)(()=>[Object(c.q)(C,{value:Object(c.X)(i).credentialsType,"onUpdate:value":t[4]||(t[4]=e=>Object(c.X)(i).credentialsType=e),style:{width:"85px"},getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(o),(e,t)=>(Object(c.H)(),Object(c.k)(q,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1}),Object(c.q)(v,{span:6},{default:Object(c.cb)(()=>[Object(c.q)(O,{name:"credentialsNo"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).credentialsNo,"onUpdate:value":t[5]||(t[5]=e=>Object(c.X)(i).credentialsNo=e),style:{width:"190px"},placeholder:"请输入身份证号",allowClear:""},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(v,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"邮箱号码：",name:"email"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).email,"onUpdate:value":t[6]||(t[6]=e=>Object(c.X)(i).email=e),placeholder:"请输入邮箱号码",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(v,{span:24},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"所属组织：",name:"orgCode","label-col":{span:3},"wrapper-col":{span:21}},{default:Object(c.cb)(()=>[Object(c.q)(C,{value:Object(c.X)(i).orgCode,"onUpdate:value":t[7]||(t[7]=e=>Object(c.X)(i).orgCode=e),style:{width:"99%"},placeholder:"请选择",getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(d).company,(e,t)=>(Object(c.H)(),Object(c.k)(q,{key:t,value:e.orgCode},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.orgName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(v,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"生效时间：",name:"effectiveTime"},{default:Object(c.cb)(()=>[Object(c.q)(X,{value:Object(c.X)(i).effectiveTime,"onUpdate:value":t[8]||(t[8]=e=>Object(c.X)(i).effectiveTime=e),format:"YYYY-MM-DD",style:{width:"290px"},disabled:"",getPopupContainer:e=>e.parentNode},null,8,["value","getPopupContainer"])]),_:1})]),_:1}),Object(c.q)(v,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"失效时间：",name:"invalidTime"},{default:Object(c.cb)(()=>[Object(c.q)(X,{value:Object(c.X)(i).invalidTime,"onUpdate:value":t[9]||(t[9]=e=>Object(c.X)(i).invalidTime=e),format:"YYYY-MM-DD",style:{width:"290px"},"disabled-date":Object(c.X)(u),getPopupContainer:e=>e.parentNode},null,8,["value","disabled-date","getPopupContainer"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])])]),_:1},8,["visible","getContainer"])],64)}}};a("810c");var ce=r()(ae,[["__scopeId","data-v-15dfb9f8"]]);const le=e=>(Object(c.K)("data-v-53eba613"),e=e(),Object(c.I)(),e),ne=Object(c.p)(" 取消 "),be=Object(c.p)(" 添加 "),se=le(()=>Object(c.n)("p",{class:"notice"},"添加成功后，对方将收到一条已加入项目的通知",-1)),re=Object(c.p)(" 从集团成员中选择（如想添加的成员不属于本集团，请点击"),oe=Object(c.p)("） "),ie=le(()=>Object(c.n)("div",{class:"title"},"成员添加",-1)),de={class:"userContent"};var ue={__name:"index",props:{addUserVisible:{type:Boolean,default:!1}},emits:["closeAddUserModal","addNewUserEmit"],setup(e,t){let{emit:a}=t;const n=e,b=Object(c.r)({components:{AddNewUser:ce}}),s=Object(c.i)({get:()=>n.addUserVisible,set:()=>{}});let r=Object(S.b)();const o=Object(c.M)(),i=Object(l.c)(),d=Object(c.L)({targetKeys:[],memberData:[]});let u=[],O=[],j=Object(c.M)(!1);const p=Object(c.M)(),m=[{dataIndex:"departmentLeader",title:"成员名"},{dataIndex:"deptName",title:"部门"},{dataIndex:"jobName",title:"职务"},{dataIndex:"dmobilePhoneNum",title:"手机号"}],f=()=>{d.targetKeys=[],d.memberData=[],u=[],O=[],a("closeAddUserModal")},g=()=>{if(O.length<=0)w.a.$emit("pop",{type:"warning",msg:"请添加成员"});else{(async function(e){return Object(A.a)({url:"appStore/v1.0/dashboard/postMemberGroupMember",method:"post",data:e})})({memberList:O.map(e=>Object.assign({},e,{dMobilePhoneNum:e.dmobilePhoneNum,dEmail:e.demail})),groupId:i.currentRoute.value.params.id}).then(e=>{e.success?(w.a.$emit("pop",{type:"success",msg:"添加成员成功"}),r.dispatch("getGroupListActions"),a("addNewUserEmit"),f()):w.a.$emit("pop",{type:"error",msg:e.msg})})}},v=()=>{j.value=!0},h=()=>{j.value=!1},y=e=>{d.targetKeys=e,d.targetKeys.forEach(e=>{d.memberData.forEach(t=>{if(t.key===e){if(O.some(t=>t.key===e))return;O.push(t)}})})},_=Object(Q.a)((e,t)=>{if("left"===e){if(!t)return;(async function(e){return Object(A.a)({url:"appStore/v1.0/dashboard/memberAshSetting",method:"post",data:e})})({userName:t,groupId:i.currentRoute.value.params.id}).then(e=>{200==e.code?(u=e.data,u.forEach(e=>{e.key=e.dmobilePhoneNum,O=O.filter(t=>t.key!==e.key)}),d.memberData=u.concat(O)):w.a.$emit("pop",{type:"error",msg:e.msg})})}},100),q=e=>{let{selectedKeys:t,onItemSelectAll:a,onItemSelect:c}=e;return{onSelectAll:(e,c)=>{const l=c.map(e=>{let{key:t}=e;return t}),n=e?Object($.a)(l,t):Object($.a)(t,l);a(n,e)},onSelect:(e,t)=>{let{key:a}=e;c(a,t)},selectedRowKeys:t,getCheckboxProps:e=>({disabled:1===e.type})}};return Object(c.W)(b),Object(c.W)(d),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-table"),n=Object(c.Q)("a-transfer"),b=Object(c.Q)("a-modal");return Object(c.H)(),Object(c.m)(c.b,null,[Object(c.n)("div",{id:"add-user-box",ref_key:"addUserBoxRef",ref:p},null,512),Object(c.q)(b,{visible:Object(c.X)(s),"onUpdate:visible":t[0]||(t[0]=e=>Object(c.v)(s)?s.value=e:null),title:"添加项目成员",width:1200,class:"user",maskClosable:!1,getContainer:()=>e.$refs.addUserBoxRef,onCancel:f},{footer:Object(c.cb)(()=>[Object(c.q)(a,{onClick:f},{default:Object(c.cb)(()=>[ne]),_:1}),Object(c.q)(a,{type:"primary",onClick:g},{default:Object(c.cb)(()=>[be]),_:1})]),default:Object(c.cb)(()=>[se,Object(c.n)("p",{class:"notice"},[re,Object(c.n)("span",{onClick:v}," 添加成员 "),oe]),ie,Object(c.n)("div",de,[Object(c.X)(s)?(Object(c.H)(),Object(c.k)(n,{key:0,ref_key:"transferRef",ref:o,"data-source":d.memberData,"target-keys":d.targetKeys,showSearch:"","filter-option":(e,t)=>-1!==t.departmentLeader.indexOf(e),onChange:y,onSearch:Object(c.X)(_)},{children:Object(c.cb)(t=>{let{selectedKeys:a,filteredItems:n,onItemSelectAll:b,onItemSelect:s}=t;return[Object(c.q)(l,{"row-selection":q({selectedKeys:a,onItemSelectAll:b,onItemSelect:s}),columns:m,"data-source":n,size:"small","custom-row":t=>{let{key:c}=t;return{on:{click:()=>{e.console.log(c),e.itemSelect(c,!a.includes(c))}}}}},null,8,["row-selection","data-source","custom-row"])]}),_:1},8,["data-source","target-keys","filter-option","onSearch"])):Object(c.l)("",!0)]),Object(c.q)(ce,{modelVisible:Object(c.X)(j),onModelCancel:h},null,8,["modelVisible"])]),_:1},8,["visible","getContainer"])],64)}}};a("3ffb");var Oe=r()(ue,[["__scopeId","data-v-53eba613"]]);const je={class:"list-box"};var pe={__name:"index",setup(e){const t=Object(c.r)({components:{ListHeadCom:q,CusTip:o,ListTableCom:T,addUser:Oe}}),a=Object(l.c)();let n={};const{selectionShow:b,addUserVisible:s,defState:r,listTableRef:i,getDetail:d,getList:u,patchDelete:O,patchDeleteCancel:j,clearSelectionData:p,addUserHandle:m,closeAddUserModal:f}=function(){const e=Object(c.M)(!1),t=Object(c.M)(!1),a=Object(c.M)(),l=Object(c.L)({dataSourceList:[],pagination:{total:0,page:1,pageSize:10},tableLoading:!1,titleName:""}),n=()=>{e.value=!1};return{selectionShow:e,addUserVisible:t,defState:l,listTableRef:a,getDetail:e=>{Object(L.c)(e).then(e=>{e.success&&(l.titleName=e.data.name)})},getList:e=>{l.tableLoading=!0,Object(L.e)(e).then(e=>{l.tableLoading=!1,e.success&&(l.dataSourceList=e.data.result,l.pagination.total=e.data.total,l.pagination.pageSize=e.data.pageSize,l.pagination.page=e.data.page)})},patchDelete:()=>{e.value=!0},patchDeleteCancel:n,clearSelectionData:()=>{n(),a.value&&a.value.clearSelectionData()},addUserHandle:()=>{t.value=!0},closeAddUserModal:()=>{t.value=!1}}}(),g=e=>{p(),n=e;const t=Object.assign({},{page:r.pagination.page,pageSize:r.pagination.pageSize,groupId:a.currentRoute.value.params.id},e);u(t)},v=e=>{const t=Object.assign({},n,{page:e.page||r.pagination.page,pageSize:e.pageSize||r.pagination.pageSize,groupId:a.currentRoute.value.params.id});u(t)},h=()=>{g({sort:"1"})};return Object(c.ab)(()=>a.currentRoute.value.params.id,e=>{e&&a.currentRoute.value.path.indexOf("userList")>-1&&(r.dataSourceList=[],r.pagination={total:0,page:1,pageSize:r.pagination.pageSize},p(),d(e),g({sort:1}))},{immediate:!0}),Object(c.W)(t),Object(c.W)(r),(e,t)=>(Object(c.H)(),Object(c.m)("div",je,[Object(c.q)(q,{titleName:Object(c.X)(r).titleName,onPatchDelete:Object(c.X)(O),onGetList:g,onAddUser:Object(c.X)(m)},null,8,["titleName","onPatchDelete","onAddUser"]),Object(c.q)(o,{message:"为保证企业信息安全，请及时将岗位变动与离职成员进行管理。"}),Object(c.q)(T,{ref_key:"listTableRef",ref:i,titleName:Object(c.X)(r).titleName,dataSourceList:Object(c.X)(r).dataSourceList,tableLoading:Object(c.X)(r).tableLoading,pagination:Object(c.X)(r).pagination,selectionShow:Object(c.X)(b),onPatchDeleteCancel:Object(c.X)(j),onGetList:v},null,8,["titleName","dataSourceList","tableLoading","pagination","selectionShow","onPatchDeleteCancel"]),Object(c.q)(Oe,{addUserVisible:Object(c.X)(s),onAddNewUserEmit:h,onCloseAddUserModal:Object(c.X)(f)},null,8,["addUserVisible","onCloseAddUserModal"])]))}};a("bd8fb");const me=r()(pe,[["__scopeId","data-v-7ba07dd2"]]);t.default=me},2582:function(e,t,a){},"2f11":function(e,t,a){"use strict";a("3dac")},"319b":function(e,t,a){e.exports=a.p+"static/img/search_empty.81c0a8f2.png"},"331b":function(e,t,a){},"3dac":function(e,t,a){},"3f49":function(e,t,a){"use strict";a("331b")},"3ffb":function(e,t,a){"use strict";a("01ca")},"57cd":function(e,t,a){"use strict";a("c442")},"5caf":function(e,t,a){},"63c1":function(e,t,a){"use strict";a("2582")},"6fb5":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("3cac"),n=a("e9d5"),b=a("6c02"),s=a("5502");const r={class:"left-box"},o={class:"left-handle"},i={class:"title"},d={style:{"margin-bottom":"22px"}},u={class:"group-box"},O=["onClick"],j={class:"name"},p={class:"count"};var m={__name:"leftMenu",setup(e){const t=Object(b.c)();let a=Object(s.b)();const m=Object(c.r)({components:{FormOutlined:l.a,SearchOutlined:n.a}});let f=[],g=Object(c.L)({data:[]}),v=Object(c.M)("");const h=()=>{g.data=f.filter(e=>e.name.indexOf(v.value)>-1)},y=e=>{v.value=e.target.value},_=()=>{t.push("/userGroup/groupCreate")},q=e=>{t.push("/userGroup/groupEdit/"+e)},C=e=>{t.push("/userGroup/userList/"+e)};return Object(c.ab)(()=>a.state.userGroupStore.groupList,(e,t)=>{f=e,g.data=f.filter(e=>e.name.indexOf(v.value)>-1)},{deep:!0}),Object(c.ab)(()=>v.value,e=>{g.data=f.filter(t=>t.name.indexOf(e)>-1)}),Object(c.W)(m),(e,t)=>{const a=Object(c.Q)("a-input");return Object(c.H)(),Object(c.m)("div",r,[Object(c.n)("div",o,[Object(c.n)("div",i,"用户组 （"+Object(c.T)(Object(c.X)(f).length)+"）",1),Object(c.n)("div",{onClick:_,class:"add-btn"},"新增用户组")]),Object(c.n)("div",d,[Object(c.q)(a,{value:Object(c.X)(v),"onUpdate:value":t[0]||(t[0]=e=>Object(c.v)(v)?v.value=e:v=e),onChange:y,onPressEnter:h,style:{width:"260px","margin-right":"20px"},placeholder:"搜索用户组"},{suffix:Object(c.cb)(()=>[Object(c.q)(Object(c.X)(n.a),{onClick:h})]),_:1},8,["value"])]),Object(c.n)("div",u,[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(g).data,(e,t)=>(Object(c.H)(),Object(c.m)("div",{key:t,onClick:t=>C(e.id),class:"group-item"},[Object(c.n)("div",j,Object(c.T)(e.name),1),Object(c.q)(Object(c.X)(l.a),{onClick:Object(c.eb)(t=>q(e.id),["stop","prevent"]),class:"edit-icon"},null,8,["onClick"]),Object(c.n)("div",p,Object(c.T)(e.memberTotal),1)],8,O))),128))])])}}},f=(a("9f24"),a("6b0d")),g=a.n(f);var v=g()(m,[["__scopeId","data-v-5a96c2ca"]]);const h={id:"user-group"},y={class:"left-menu"},_={class:"right-content"};var q={__name:"index",setup(e){let t=Object(s.b)();return Object(c.E)(()=>{t.dispatch("getGroupListActions")}),(e,t)=>{const a=Object(c.Q)("router-view");return Object(c.H)(),Object(c.m)("div",h,[Object(c.n)("div",y,[Object(c.q)(Object(c.X)(v))]),Object(c.n)("div",_,[Object(c.q)(a)])])}}};a("737f");const C=g()(q,[["__scopeId","data-v-c5776cc2"]]);t.default=C},"737f":function(e,t,a){"use strict";a("5caf")},"810c":function(e,t,a){"use strict";a("14a2")},"9f24":function(e,t,a){"use strict";a("be70")},b15c:function(e,t,a){},bd8fb:function(e,t,a){"use strict";a("b15c")},be70:function(e,t,a){},c442:function(e,t,a){},dc75:function(e,t,a){"use strict";a.r(t);var c=a("7a23");var l={},n=a("6b0d");const b=a.n(n)()(l,[["render",function(e,t,a,l,n,b){return Object(c.H)(),Object(c.m)("div",null,"页面走丢了")}]]);t.default=b},ef22:function(e,t,a){"use strict";a.r(t);a("cd17");var c=a("ed3b"),l=a("7a23"),n=a("6c02"),b=a("4820"),s=a("85b1"),r=a("5502"),o=a("986e");const i={class:"form-title"},d=Object(l.p)("内部"),u=Object(l.p)("外部"),O=Object(l.p)("外包"),j=Object(l.p)("其他"),p={class:"form-handle"},m=Object(l.p)("保存"),f=Object(l.p)("   "),g=Object(l.p)("取消"),v={key:0},h=Object(l.p)("删除用户组");var y={__name:"index",setup(e){let t=Object(r.b)();const a=Object(n.c)(),y=Object(l.M)(),_=Object(l.M)(),{leaderList:q,fetchLeaderUser:C,memberList:X,fetchMemberUser:L,editState:S,isEdit:w,groupId:k,formState:x,resetData:N,initData:U,handleLeaderSelect:D,handleLeaderDeselect:I,handleMemberSelect:M,handleMemberDeselect:T}=function(){let e=Object(l.L)({leaderList:[],memberList:[]}),t=Object(l.M)(!1),a=Object(l.M)(""),c=Object(l.L)({leaderArr:[],memberArr:[]}),n=0,r=Object(l.L)({list:[],fetching:!1}),o=0,i=Object(l.L)({list:[],fetching:!1});const d=Object(s.a)(e=>{n+=1;const t=n;r.list=[],r.fetching=!0,Object(b.h)({userName:e}).then(e=>{if(e.success){if(t!==n)return;if(e.data){const t=e.data.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName}));r.list=t}r.fetching=!1}})},300),u=Object(s.a)(e=>{o+=1;const t=o;i.list=[],i.fetching=!0,Object(b.h)({userName:e}).then(e=>{if(e.success){if(t!==o)return;if(e.data){const t=e.data.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName,id:null}));i.list=t}else i.list=[];i.fetching=!1}})},300);return{leaderList:r,fetchLeaderUser:d,memberList:i,fetchMemberUser:u,editState:c,formState:e,isEdit:t,groupId:a,resetData:()=>{e.name="",e.introduction="",e.type="",t.value=!1},initData:l=>{a.value=l,Object(b.c)(l).then(t=>{t.success&&(e.name=t.data.name,e.introduction=t.data.introduction,e.type=""+t.data.type,e.leaderList=t.data.leaderList.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName})),e.memberList=t.data.memberList.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName})),c.leaderArr=e.leaderList,c.memberArr=e.memberList)}),t.value=!0},handleLeaderSelect:(e,t)=>{c.leaderArr.push(t)},handleLeaderDeselect:e=>{const t=c.leaderArr.findIndex(t=>t.value===e.key);c.leaderArr.splice(t,1)},handleMemberSelect:(e,t)=>{c.memberArr.push(t)},handleMemberDeselect:e=>{const t=c.memberArr.findIndex(t=>t.value===e.key);c.memberArr.splice(t,1)}}}(),A=Object(s.a)(()=>{y.value.validateFields().then(e=>{const c=S.leaderArr.concat(S.memberArr).map(e=>e.dMobilePhoneNum),l=Array.from(new Set(c));if(c.length!=l.length)return o.a.$emit("pop",{type:"warning",msg:"负责人和成员选择重复！"}),!1;const n=Object.assign({},e,{type:parseInt(e.type),leaderList:S.leaderArr,memberList:S.memberArr});w.value?(n.id=k.value,Object(b.g)(n).then(e=>{e.success?(o.a.$emit("pop",{type:"success",msg:"编辑用户组成功"}),a.push("/userGroup/userList/"+k.value),t.dispatch("getGroupListActions")):o.a.$emit("pop",{type:"error",msg:e.msg})})):Object(b.f)(n).then(e=>{e.success?(o.a.$emit("pop",{type:"success",msg:"新增用户组成功"}),a.push("/userGroup/userList/"+e.data),t.dispatch("getGroupListActions")):o.a.$emit("pop",{type:"error",msg:e.msg})})}).catch(e=>{})},300),Q=()=>{a.push("/userGroup/groupEdit")},$=()=>{c.a.confirm({title:"删除用户组",icon:Object(l.q)(Object(l.Q)("ExclamationCircleOutlined"),{style:"color: #469ffb;"},null),content:"是否删除该用户组",getContainer:()=>_.value,onOk(){Object(b.b)(a.currentRoute.value.params.id).then(e=>{a.go("/userGroup/groupEdit")})},onCancel(){}})};return Object(l.ab)(()=>a.currentRoute.value.params.id,e=>{e&&a.currentRoute.value.path.indexOf("groupEdit")>-1?(N(),U(e)):N()},{immediate:!0}),(e,t)=>{const a=Object(l.Q)("a-input"),c=Object(l.Q)("a-form-item"),n=Object(l.Q)("a-textarea"),b=Object(l.Q)("a-radio"),s=Object(l.Q)("a-radio-group"),r=Object(l.Q)("a-spin"),o=Object(l.Q)("a-select"),S=Object(l.Q)("a-form"),k=Object(l.Q)("a-button");return Object(l.H)(),Object(l.m)("div",{id:"user-group-form",ref_key:"userGroupFormRef",ref:_,class:"form-box"},[Object(l.n)("div",i,Object(l.T)(Object(l.X)(w)?"编辑用户组":"添加用户组"),1),Object(l.q)(S,{model:Object(l.X)(x),layout:"vertical",name:"basic",autocomplete:"off",ref_key:"formRef",ref:y},{default:Object(l.cb)(()=>[Object(l.q)(c,{label:"名称",name:"name",rules:[{required:!0,message:"请填写用户组名称!"}]},{default:Object(l.cb)(()=>[Object(l.q)(a,{value:Object(l.X)(x).name,"onUpdate:value":t[0]||(t[0]=e=>Object(l.X)(x).name=e),maxlength:"20",placeholder:"名称长度不能大于20"},null,8,["value"])]),_:1}),Object(l.q)(c,{label:"简介",name:"introduction"},{default:Object(l.cb)(()=>[Object(l.q)(n,{value:Object(l.X)(x).introduction,"onUpdate:value":t[1]||(t[1]=e=>Object(l.X)(x).introduction=e),maxlength:"300",placeholder:"最多输入300字"},null,8,["value"])]),_:1}),Object(l.q)(c,{label:"类型",name:"type",rules:[{required:!0,message:"请选择类型"}]},{default:Object(l.cb)(()=>[Object(l.q)(s,{value:Object(l.X)(x).type,"onUpdate:value":t[2]||(t[2]=e=>Object(l.X)(x).type=e)},{default:Object(l.cb)(()=>[Object(l.q)(b,{value:"1"},{default:Object(l.cb)(()=>[d]),_:1}),Object(l.q)(b,{value:"2"},{default:Object(l.cb)(()=>[u]),_:1}),Object(l.q)(b,{value:"3"},{default:Object(l.cb)(()=>[O]),_:1}),Object(l.q)(b,{value:"4"},{default:Object(l.cb)(()=>[j]),_:1})]),_:1},8,["value"])]),_:1}),Object(l.q)(c,{name:"leaderList",label:"负责人",rules:[{required:!0,message:"请选择负责人"}]},{default:Object(l.cb)(()=>[Object(l.q)(o,{value:Object(l.X)(x).leaderList,"onUpdate:value":t[3]||(t[3]=e=>Object(l.X)(x).leaderList=e),mode:"multiple","label-in-value":"",placeholder:"请选择负责人",style:{width:"100%"},"filter-option":!1,"not-found-content":Object(l.X)(q).fetching?void 0:null,options:Object(l.X)(q).list,getPopupContainer:e=>e.parentNode,onSearch:Object(l.X)(C),onSelect:Object(l.X)(D),onDeselect:Object(l.X)(I)},Object(l.o)({_:2},[Object(l.X)(q).fetching?{name:"notFoundContent",fn:Object(l.cb)(()=>[Object(l.q)(r,{size:"small"})])}:void 0]),1032,["value","not-found-content","options","getPopupContainer","onSearch","onSelect","onDeselect"])]),_:1}),Object(l.q)(c,{name:"memberList",label:"成员",rules:[{required:!0,message:"请选择成员"}]},{default:Object(l.cb)(()=>[Object(l.q)(o,{value:Object(l.X)(x).memberList,"onUpdate:value":t[4]||(t[4]=e=>Object(l.X)(x).memberList=e),mode:"multiple","label-in-value":"",placeholder:"请选择成员",style:{width:"100%"},"filter-option":!1,"not-found-content":Object(l.X)(X).fetching?void 0:null,options:Object(l.X)(X).list,getPopupContainer:e=>e.parentNode,onSearch:Object(l.X)(L),onSelect:Object(l.X)(M),onDeselect:Object(l.X)(T)},Object(l.o)({_:2},[Object(l.X)(X).fetching?{name:"notFoundContent",fn:Object(l.cb)(()=>[Object(l.q)(r,{size:"small"})])}:void 0]),1032,["value","not-found-content","options","getPopupContainer","onSearch","onSelect","onDeselect"])]),_:1})]),_:1},8,["model"]),Object(l.n)("div",p,[Object(l.n)("div",null,[Object(l.q)(k,{onClick:Object(l.X)(A),type:"primary"},{default:Object(l.cb)(()=>[m]),_:1},8,["onClick"]),f,Object(l.q)(k,{onClick:Q},{default:Object(l.cb)(()=>[g]),_:1})]),Object(l.X)(w)?(Object(l.H)(),Object(l.m)("div",v,[Object(l.q)(k,{onClick:$,type:"primary",danger:""},{default:Object(l.cb)(()=>[h]),_:1})])):Object(l.l)("",!0)])],512)}}},_=(a("3f49"),a("6b0d"));const q=a.n(_)()(y,[["__scopeId","data-v-6a6f6b66"]]);t.default=q}}]);