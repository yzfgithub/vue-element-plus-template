(window["webpackJsonp_能力商城控制台"]=window["webpackJsonp_能力商城控制台"]||[]).push([["manifest"],{"06fe":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("319b"),s=a.n(l);const n={class:"nodata-box"},b=[(e=>(Object(c.K)("data-v-44d99e75"),e=e(),Object(c.I)(),e))(()=>Object(c.n)("div",{class:"empty"},[Object(c.n)("img",{src:s.a,alt:""}),Object(c.n)("span",null,"请选择用户组")],-1))];var d={setup(){}},r=(a("57cd"),a("6b0d"));const i=a.n(r)()(d,[["render",function(e,t,a,l,s,d){return Object(c.H)(),Object(c.m)("div",n,b)}],["__scopeId","data-v-44d99e75"]]);t.default=i},"0935":function(e,t,a){},"0de0":function(e,t,a){},"0fc4":function(e,t,a){"use strict";a("0935")},1589:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("6c02");const s={class:"tip-box"};var n={__name:"CusTip",props:{message:{type:String,default:""}},setup(e){const t=e;return Object(c.W)(t),(t,a)=>(Object(c.H)(),Object(c.m)("div",s,Object(c.T)(e.message),1))}},b=(a("0fc4"),a("6b0d")),d=a.n(b);var r=d()(n,[["__scopeId","data-v-666a7bcc"]]),i=a("47ce"),o=a("e9d5");const j=[{label:"默认排序",value:"1"},{label:"所属组织",value:"2"},{label:"加入时间",value:"3"}],u=e=>(Object(c.K)("data-v-62e68aa7"),e=e(),Object(c.I)(),e),O={class:"list-head"},p=["title"],m={class:"cus-input"},f={class:"right-handle"},v=Object(c.p)(" 排序: "),g=u(()=>Object(c.n)("span",{class:"add-label"},"添加成员",-1)),h=Object(c.p)("      "),y=Object(c.p)("批量删除");var _={__name:"listHeadCom",props:{titleName:{type:String,default:""}},emits:["patchDelete","getList","addUser"],setup(e,t){let{emit:a}=t;const l=e,s=Object(c.r)({components:{PlusOutlined:i.a,SearchOutlined:o.a}}),{titleName:n}=Object(c.W)(l),b=Object(c.M)("1"),d=Object(c.M)(""),r=()=>{a("addUser")},u=()=>{a("patchDelete")},_=e=>{d.value=e.target.value},q=()=>{a("getList",{sort:b.value,name:d.value})},k=e=>{b.value=e,a("getList",{sort:parseInt(b.value),name:d.value})};return Object(c.W)(s),(e,t)=>{const a=Object(c.Q)("a-input"),l=Object(c.Q)("a-select-option"),s=Object(c.Q)("a-select"),C=Object(c.Q)("a-button");return Object(c.H)(),Object(c.m)("div",O,[Object(c.n)("div",{class:"title",title:Object(c.X)(n)},Object(c.T)(Object(c.X)(n)),9,p),Object(c.n)("div",m,[Object(c.q)(a,{value:d.value,"onUpdate:value":t[0]||(t[0]=e=>d.value=e),onChange:_,onPressEnter:q,style:{width:"200px"},placeholder:"搜索成员名称"},{suffix:Object(c.cb)(()=>[Object(c.q)(Object(c.X)(o.a),{onClick:q})]),_:1},8,["value"])]),Object(c.n)("div",f,[Object(c.n)("div",null,[v,Object(c.q)(s,{ref:"select",value:b.value,"onUpdate:value":t[1]||(t[1]=e=>b.value=e),style:{width:"120px"},onChange:k,class:"sort"},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(j),(e,t)=>(Object(c.H)(),Object(c.k)(l,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),Object(c.q)(C,{onClick:r,type:"primary",class:"add-btn"},{icon:Object(c.cb)(()=>[Object(c.q)(Object(c.X)(i.a))]),default:Object(c.cb)(()=>[g]),_:1}),h,Object(c.q)(C,{onClick:u,class:"btn"},{default:Object(c.cb)(()=>[y]),_:1})])])}}};a("f871");var q=d()(_,[["__scopeId","data-v-62e68aa7"]]),k=(a("3b18"),a("f64c")),C=(a("cd17"),a("ed3b")),w=a("96d9"),L=a("4820"),S=a("5502");const x={key:0,class:"selection-handle"},N=Object(c.p)("移出用户组"),X=Object(c.p)("    "),I=Object(c.p)("取消"),z={key:0,class:"table-edit"},U=["onClick"];var T={__name:"listTableCom",props:{selectionShow:{type:Boolean,default:!1},tableLoading:{type:Boolean,default:!1},dataSourceList:{type:Array,default:()=>[]},pagination:{type:Object},titleName:{type:String}},emits:["patchDeleteCancel","getList"],setup(e,t){let{expose:a,emit:l}=t;const s=e;let n=Object(S.b)();const b=[{title:"成员",dataIndex:"realName",key:"realName",width:100},{title:"手机号",dataIndex:"phone",key:"phone",width:120},{title:"邮箱",dataIndex:"email",key:"email",width:150},{title:"员工类型",dataIndex:"type",key:"type",width:90,customRender:e=>{let{text:t}=e;return 0===t?"成员":"负责人"}},{title:"所属组织",dataIndex:"companyName",key:"companyName"},{title:"工作地",dataIndex:"address",key:"address"},{title:"操作",dataIndex:"operation",key:"operation",width:140}],{selectionShow:d,dataSourceList:r,pagination:i,tableLoading:o,titleName:j}=Object(c.W)(s),u=Object(c.L)({selectedKeys:[],selectedRowKeys:[]}),O=e=>{u.selectedRowKeys=e;const t=r.value.map(e=>e),a=u.selectedKeys.map(e=>e);for(let c=0;c<t.length;c++){const l=a.findIndex(e=>e.id===t[c].id),s=e.findIndex(e=>e===t[c].id);l>-1&&-1===s?a.splice(l,1):-1===l&&s>-1&&a.push(t[c])}u.selectedKeys=a},p=()=>{u.selectedRowKeys=[],u.selectedKeys=[]},m=e=>{l("getList",{page:e.current,pageSize:e.pageSize}),u.selectedRowKeys=u.selectedKeys.map(e=>e.id)},f=e=>{Object(L.a)(e).then(e=>{e.success&&(l("getList",{}),g(),n.dispatch("getGroupListActions"))})},v=()=>{u.selectedKeys.length||k.a.warning("选中用户组不能为空");const e=u.selectedKeys[0].realName;C.a.confirm({title:"移出用户组",icon:Object(c.q)(w.a,{style:"color: #469ffb;"},null),content:Object(c.q)("span",null,[Object(c.q)("span",null,`是否将【${e}${u.selectedKeys.length>1?"等":""}`),Object(c.q)("span",{style:"color: #469ffb;"},""+(u.selectedKeys.length>1?u.selectedKeys.length:"")),Object(c.q)("span",null,`${u.selectedKeys.length>1?"人":""}】移出【${j.value}】用户组？`)]),onOk(){const e=u.selectedKeys.map(e=>e.id);f(e)},onCancel(){}})},g=()=>{l("patchDeleteCancel"),p()};return a({clearSelectionData:p}),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-table");return Object(c.H)(),Object(c.m)(c.b,null,[Object(c.X)(d)?(Object(c.H)(),Object(c.m)("div",x,[Object(c.n)("div",null,"已经选择"+Object(c.T)(u.selectedKeys.length)+"人",1),Object(c.n)("div",null,[Object(c.q)(a,{onClick:v,size:"small",type:"primary",class:"remove-btn"},{default:Object(c.cb)(()=>[N]),_:1}),X,Object(c.q)(a,{onClick:g,size:"small",class:"remove-btn"},{default:Object(c.cb)(()=>[I]),_:1})])])):Object(c.l)("",!0),Object(c.q)(l,{scroll:{y:600},"row-selection":Object(c.X)(d)?{selectedRowKeys:u.selectedRowKeys,onChange:O}:null,dataSource:Object(c.X)(r),columns:b,loading:Object(c.X)(o),onChange:m,rowKey:e=>e.id,pagination:{pageSize:Object(c.X)(i).pageSize,pageNum:Object(c.X)(i).page,total:Object(c.X)(i).total,showQuickJumper:!0,showSizeChanger:!0,showTotal:(e,t)=>`共${e}条`,pageSizeOptions:["10","50","100"]}},{bodyCell:Object(c.cb)(e=>{let{column:t,text:a,record:l}=e;return["operation"===t.dataIndex?(Object(c.H)(),Object(c.m)("div",z,[Object(c.n)("span",{onClick:e=>(e=>{C.a.confirm({title:"删除用户组成员",icon:Object(c.q)(w.a,{style:"color: #469ffb;"},null),content:`是否删除成员${e.realName}？`,onOk(){f([e.id])},onCancel(){}})})(l)},"移出用户组",8,U)])):Object(c.l)("",!0)]}),_:1},8,["row-selection","dataSource","loading","rowKey","pagination"])],64)}}};a("9148");var D=d()(T,[["__scopeId","data-v-433ae3ef"]]),M=(a("caad"),a("b775"));var Q=a("85b1"),K=a("5b2e");const A={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{message:"手机号格式不正确",trigger:"blur",pattern:/^1[2-9]\d{9}$/}],type:[{required:!0,message:"请选择员工类型",trigger:"blur"}],credentialsType:[{required:!0,message:"请选择证件类型",trigger:"change"}],credentialsNo:[{required:!0,message:"请输入身份证号",trigger:"blur"},{message:"身份证号格式不正确",trigger:"blur",pattern:/(^\d{18}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/}],email:[{type:"email",required:!0,message:"请输入邮箱",trigger:"blur"}],orgCode:[{required:!0,message:"请选择所属组织",trigger:"change"}]},Y={span:6},H={span:18},E=[{label:"合作伙伴",value:1}],R=[{label:"身份证",value:1}];var $=a("c1df"),G=a.n($),W=a("5a0c"),P=a.n(W);const F=(e=>(Object(c.K)("data-v-665ab63c"),e=e(),Object(c.I)(),e))(()=>Object(c.n)("div",{id:"new-user-modal"},null,-1)),V=Object(c.p)(" 保存 "),B=Object(c.p)(" 取消 "),J={class:"form"},Z=Object(c.p)(" 男 "),ee=Object(c.p)(" 女 ");var te={__name:"AddNewUser",props:{modelVisible:{type:Boolean,default:!1}},emits:["modelCancel"],setup(e,t){let{emit:a}=t;const l=e,{modelVisible:s}=Object(c.W)(l),n=Object(c.L)({company:[]}),b=Object(c.L)({credentialsType:1,type:1,effectiveTime:G()(new Date),invalidTime:P()(G()(new Date).add(1,"Y").endOf("day").format("YYYY-MM-DD"),"YYYY-MM-DD")}),{rules:d,labelCol:r,wrapperCol:i,type:o,certificate:j}={rules:A,labelCol:Y,wrapperCol:H,type:E,certificate:R},u=Object(c.M)(),O=()=>{(async function(e){return Object(M.a)({url:"appStore/v1.0/dashboard/getOrgList",method:"post",data:e})})().then(e=>{n.company=e.data})},p=Object(Q.a)(()=>{u.value.validateFields().then(e=>{b.effectiveTime=G()(b.effectiveTime).format("YYYY-MM-DD"),b.invalidTime=G()(b.invalidTime).format("YYYY-MM-DD"),async function(e){return Object(M.a)({url:"appStore/v1.0/dashboard/addStoreUser",method:"post",data:e})}(b).then(e=>{e.success?(k.a.info("保存成功"),this.handleCancel()):k.a.warning(e.msg)})})},300),m=()=>{u.value.resetFields(),a("modelCancel")},f=e=>e<G()(b.effectiveTime).endOf("day")||e>G()(b.effectiveTime).add(1,"Y").endOf("day"),v=()=>document.getElementById("new-user-modal");return Object(c.E)(()=>{O()}),Object(c.W)(n),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-input"),O=Object(c.Q)("a-form-item"),g=Object(c.Q)("a-col"),h=Object(c.Q)("a-radio"),y=Object(c.Q)("a-radio-group"),_=Object(c.Q)("a-row"),q=Object(c.Q)("a-select-option"),k=Object(c.Q)("a-select"),C=Object(c.Q)("a-date-picker"),w=Object(c.Q)("a-form"),L=Object(c.Q)("a-modal");return Object(c.H)(),Object(c.m)(c.b,null,[F,Object(c.q)(L,{visible:Object(c.X)(s),"onUpdate:visible":t[10]||(t[10]=e=>Object(c.v)(s)?s.value=e:null),title:"添加成员",width:838,onCancel:m,getContainer:v},{footer:Object(c.cb)(()=>[Object(c.q)(a,{type:"primary",onClick:Object(c.X)(p)},{default:Object(c.cb)(()=>[V]),_:1},8,["onClick"]),Object(c.q)(a,{onClick:m},{default:Object(c.cb)(()=>[B]),_:1})]),default:Object(c.cb)(()=>[Object(c.n)("div",J,[Object(c.q)(w,{ref_key:"newUserFormRef",ref:u,model:b,"label-col":Object(c.X)(r),"wrapper-col":Object(c.X)(i),rules:Object(c.X)(d)},{default:Object(c.cb)(()=>[Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(g,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"姓名：",name:"name"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:b.name,"onUpdate:value":t[0]||(t[0]=e=>b.name=e),placeholder:"请输入姓名",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(g,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"性别：",name:"sex"},{default:Object(c.cb)(()=>[Object(c.q)(y,{value:b.sex,"onUpdate:value":t[1]||(t[1]=e=>b.sex=e)},{default:Object(c.cb)(()=>[Object(c.q)(h,{value:"2"},{default:Object(c.cb)(()=>[Z]),_:1}),Object(c.q)(h,{value:"1"},{default:Object(c.cb)(()=>[ee]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(g,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"手机号：",name:"phone"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:b.phone,"onUpdate:value":t[2]||(t[2]=e=>b.phone=e),placeholder:"请输入手机号",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(g,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"员工类型：",name:"type"},{default:Object(c.cb)(()=>[Object(c.q)(k,{value:b.type,"onUpdate:value":t[3]||(t[3]=e=>b.type=e),getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(o),(e,t)=>(Object(c.H)(),Object(c.k)(q,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(g,{span:6},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"证件号：",name:"credentialsType","label-col":{span:12},"wrapper-col":{span:12}},{default:Object(c.cb)(()=>[Object(c.q)(k,{value:b.credentialsType,"onUpdate:value":t[4]||(t[4]=e=>b.credentialsType=e),style:{width:"85px"},getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(j),(e,t)=>(Object(c.H)(),Object(c.k)(q,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1}),Object(c.q)(g,{span:6},{default:Object(c.cb)(()=>[Object(c.q)(O,{name:"credentialsNo"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:b.credentialsNo,"onUpdate:value":t[5]||(t[5]=e=>b.credentialsNo=e),style:{width:"190px"},placeholder:"请输入身份证号",allowClear:""},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(g,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"邮箱号码：",name:"email"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:b.email,"onUpdate:value":t[6]||(t[6]=e=>b.email=e),placeholder:"请输入邮箱号码",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(g,{span:24},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"所属组织：",name:"orgCode","label-col":{span:3},"wrapper-col":{span:21}},{default:Object(c.cb)(()=>[Object(c.q)(k,{value:b.orgCode,"onUpdate:value":t[7]||(t[7]=e=>b.orgCode=e),style:{width:"99%"},placeholder:"请选择",getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(n.company,(e,t)=>(Object(c.H)(),Object(c.k)(q,{key:t,value:e.orgCode},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.orgName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1})]),_:1}),Object(c.q)(_,null,{default:Object(c.cb)(()=>[Object(c.q)(g,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"生效时间：",name:"effectiveTime"},{default:Object(c.cb)(()=>[Object(c.q)(C,{value:b.effectiveTime,"onUpdate:value":t[8]||(t[8]=e=>b.effectiveTime=e),format:"YYYY-MM-DD",style:{width:"290px"},disabled:"",getCalendarContainer:e=>e.parentNode},null,8,["value","getCalendarContainer"])]),_:1})]),_:1}),Object(c.q)(g,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"失效时间：",name:"invalidTime"},{default:Object(c.cb)(()=>[Object(c.q)(C,{value:b.invalidTime,"onUpdate:value":t[9]||(t[9]=e=>b.invalidTime=e),format:"YYYY-MM-DD",style:{width:"290px"},"disabled-date":f,getCalendarContainer:e=>e.parentNode},null,8,["value","getCalendarContainer"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])])]),_:1},8,["visible"])],64)}}};a("50bf");var ae=d()(te,[["__scopeId","data-v-665ab63c"]]);const ce=e=>(Object(c.K)("data-v-6ae96dea"),e=e(),Object(c.I)(),e),le=Object(c.p)(" 取消 "),se=Object(c.p)(" 添加 "),ne=ce(()=>Object(c.n)("p",{class:"notice"},"添加成功后，对方将收到一条已加入项目的通知",-1)),be=Object(c.p)(" 从集团成员中选择（如想添加的成员不属于本集团，请点击"),de=Object(c.p)("） "),re=ce(()=>Object(c.n)("div",{class:"title"},"成员添加",-1)),ie={class:"userContent"};var oe={__name:"index",props:{addUserVisible:{type:Boolean,default:!1}},emits:["closeAddUserModal","addNewUserEmit"],setup(e,t){let{emit:a}=t;const s=e;let n=Object(S.b)();const b=Object(c.r)({components:{AddNewUser:ae}}),{addUserVisible:d}=Object(c.W)(s),r=Object(c.M)(),i=Object(l.c)(),o=Object(c.L)({targetKeys:[],memberData:[]});let j=[],u=[],O=Object(c.M)(!1);const p=[{dataIndex:"fullName",title:"成员名"},{dataIndex:"deptName",title:"部门"},{dataIndex:"position",title:"职务"},{dataIndex:"phone",title:"手机号"}],m=()=>{a("closeAddUserModal")},f=()=>{if(u.length<=0)k.a.warning("请添加成员！");else{(async function(e){return Object(M.a)({url:"appStore/v1.0/dashboard/postMemberGroupMember",method:"post",data:e})})({memberList:u.map(e=>Object.assign({},e,{departmentLeader:e.fullName,dMobilePhoneNum:e.phone,jobName:e.position,dEmail:e.email})),groupId:i.currentRoute.value.params.id}).then(e=>{e.success?(k.a.success("添加成员成功"),n.dispatch("getGroupListActions"),a("addNewUserEmit"),m()):k.a.error(e.msg)})}},v=()=>{O.value=!0},g=()=>{O.value=!1},h=e=>{o.targetKeys=e,o.targetKeys.forEach(e=>{o.memberData.forEach(t=>{if(t.key===e){if(u.some(t=>t.key===e))return;u.push(t)}})})},y=Object(Q.a)((e,t)=>{if("left"===e){if(!t)return;(async function(e){return Object(M.a)({url:"appStore/v1.0/dashboard/queryUserByFullName",method:"post",data:e})})({fullName:t}).then(e=>{1*e.code==200?(j=e.data,j.forEach(e=>{e.key=e.userId,u=u.filter(t=>t.key!==e.key)}),o.memberData=j.concat(u)):k.a.error(e.msg)})}},100),_=e=>{let{selectedKeys:t,onItemSelectAll:a,onItemSelect:c}=e;return{onSelectAll:(e,c)=>{const l=c.map(e=>{let{key:t}=e;return t}),s=e?Object(K.a)(l,t):Object(K.a)(t,l);a(s,e)},onSelect:(e,t)=>{let{key:a}=e;c(a,t)},selectedRowKeys:t}};return Object(c.W)(b),Object(c.W)(o),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-table"),s=Object(c.Q)("a-transfer"),n=Object(c.Q)("a-modal");return Object(c.H)(),Object(c.k)(n,{visible:Object(c.X)(d),"onUpdate:visible":t[0]||(t[0]=e=>Object(c.v)(d)?d.value=e:null),title:"添加项目成员",width:1200,class:"user",maskClosable:!1,onCancel:m},{footer:Object(c.cb)(()=>[Object(c.q)(a,{onClick:m},{default:Object(c.cb)(()=>[le]),_:1}),Object(c.q)(a,{type:"primary",onClick:f},{default:Object(c.cb)(()=>[se]),_:1})]),default:Object(c.cb)(()=>[ne,Object(c.n)("p",{class:"notice"},[be,Object(c.n)("span",{onClick:v},"添加成员"),de]),re,Object(c.n)("div",ie,[Object(c.q)(s,{ref_key:"transfer",ref:r,"data-source":o.memberData,"target-keys":o.targetKeys,showSearch:"","filter-option":(e,t)=>-1!==t.fullName.indexOf(e),onChange:h,onSearch:Object(c.X)(y)},{children:Object(c.cb)(t=>{let{selectedKeys:a,filteredItems:s,onItemSelectAll:n,onItemSelect:b}=t;return[Object(c.q)(l,{"row-selection":_({selectedKeys:a,onItemSelectAll:n,onItemSelect:b}),columns:p,"data-source":s,size:"small","custom-row":t=>{let{key:c}=t;return{on:{click:()=>{e.itemSelect(c,!a.includes(c))}}}}},null,8,["row-selection","data-source","custom-row"])]}),_:1},8,["data-source","target-keys","filter-option","onSearch"])]),Object(c.q)(ae,{modelVisible:Object(c.X)(O),onModelCancel:g},null,8,["modelVisible"])]),_:1},8,["visible"])}}};a("b996");var je=d()(oe,[["__scopeId","data-v-6ae96dea"]]);const ue={class:"list-box"};var Oe={__name:"index",setup(e){const t=Object(c.r)({components:{ListHeadCom:q,CusTip:r,ListTableCom:D,addUser:je}}),a=Object(c.L)({dataSourceList:[],pagination:{total:0,page:1,pageSize:10},tableLoading:!1,titleName:""}),s=Object(l.c)(),n=Object(c.M)(),b=Object(c.M)(!1),d=Object(c.M)(!1);let i={};const o=()=>{b.value=!0},j=()=>{b.value=!1},u=()=>{j(),n.value&&n.value.clearSelectionData()},O=e=>{u(),i=e;const t=Object.assign({},{page:a.pagination.page,pageSize:a.pagination.pageSize,groupId:s.currentRoute.value.params.id},e);m(t)},p=e=>{const t=Object.assign({},i,{page:e.page||a.pagination.page,pageSize:e.pageSize||a.pagination.pageSize,groupId:s.currentRoute.value.params.id});m(t)},m=e=>{a.tableLoading=!0,Object(L.e)(e).then(e=>{a.tableLoading=!1,e.success&&(a.dataSourceList=e.data.result,a.pagination.total=e.data.total,a.pagination.pageSize=e.data.pageSize,a.pagination.page=e.data.page)})},f=()=>{d.value=!0},v=()=>{d.value=!1},g=()=>{O({sort:"1"})};return Object(c.ab)(()=>s.currentRoute.value.params.id,e=>{e&&s.currentRoute.value.path.indexOf("userList")>-1&&(a.dataSourceList=[],a.pagination={total:0,page:1,pageSize:a.pagination.pageSize},u(),(e=>{Object(L.c)(e).then(e=>{e.success&&(a.titleName=e.data.name)})})(e),O({sort:"1"}))},{immediate:!0}),Object(c.W)(t),Object(c.W)(a),(e,t)=>(Object(c.H)(),Object(c.m)("div",ue,[Object(c.q)(q,{titleName:a.titleName,onPatchDelete:o,onGetList:O,onAddUser:f},null,8,["titleName"]),Object(c.q)(r,{message:"为保证企业信息安全，请及时将岗位变动与离职成员进行管理。"}),Object(c.q)(D,{ref_key:"listTableRef",ref:n,titleName:a.titleName,dataSourceList:a.dataSourceList,tableLoading:a.tableLoading,pagination:a.pagination,selectionShow:b.value,onPatchDeleteCancel:j,onGetList:p},null,8,["titleName","dataSourceList","tableLoading","pagination","selectionShow"]),Object(c.q)(je,{addUserVisible:d.value,onAddNewUserEmit:g,onCloseAddUserModal:v},null,8,["addUserVisible"])]))}};a("4d51");const pe=d()(Oe,[["__scopeId","data-v-58111df4"]]);t.default=pe},"1b8f":function(e,t,a){},2466:function(e,t,a){"use strict";a("8549")},"319b":function(e,t,a){e.exports=a.p+"static/img/search_empty.81c0a8f2.png"},4678:function(e,t,a){var c={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function l(e){var t=s(e);return a(t)}function s(e){if(!a.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}l.keys=function(){return Object.keys(c)},l.resolve=s,e.exports=l,l.id="4678"},"4d51":function(e,t,a){"use strict";a("ae4c")},"50bf":function(e,t,a){"use strict";a("0de0")},"57cd":function(e,t,a){"use strict";a("c442")},"5caf":function(e,t,a){},"62d2":function(e,t,a){"use strict";a("f6bf")},"6fb5":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("3cac"),s=a("6c02"),n=a("5502");const b={class:"left-box"},d={class:"left-handle"},r={class:"title"},i={class:"group-box"},o=["onClick"],j={class:"name"},u={class:"count"};var O={__name:"leftMenu",setup(e){const t=Object(s.c)();let a=Object(n.b)();const O=Object(c.r)({components:{FormOutlined:l.a}});let p=Object(c.L)({data:[]});const m=()=>{t.push("/userGroup/groupCreate")},f=e=>{t.push("/userGroup/groupEdit/"+e)},v=e=>{t.push("/userGroup/userList/"+e)};return Object(c.ab)(()=>a.state.userGroupStore.groupList,(e,t)=>{p.data=e},{deep:!0}),Object(c.W)(O),(e,t)=>(Object(c.H)(),Object(c.m)("div",b,[Object(c.n)("div",d,[Object(c.n)("div",r,"用户组 （"+Object(c.T)(Object(c.X)(p).data.length)+"）",1),Object(c.n)("div",{onClick:m,class:"add-btn"},"新增用户组")]),Object(c.n)("div",i,[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(p).data,(e,t)=>(Object(c.H)(),Object(c.m)("div",{key:t,onClick:t=>v(e.id),class:"group-item"},[Object(c.n)("div",j,Object(c.T)(e.name),1),Object(c.q)(Object(c.X)(l.a),{onClick:Object(c.eb)(t=>f(e.id),["stop","prevent"]),class:"edit-icon"},null,8,["onClick"]),Object(c.n)("div",u,Object(c.T)(e.memberTotal),1)],8,o))),128))])]))}},p=(a("62d2"),a("6b0d")),m=a.n(p);var f=m()(O,[["__scopeId","data-v-0e16ac6c"]]);const v={id:"user-group"},g={class:"left-menu"},h={class:"right-content"};var y={__name:"index",setup(e){let t=Object(n.b)();return Object(c.E)(()=>{t.dispatch("getGroupListActions")}),(e,t)=>{const a=Object(c.Q)("router-view");return Object(c.H)(),Object(c.m)("div",v,[Object(c.n)("div",g,[Object(c.q)(Object(c.X)(f))]),Object(c.n)("div",h,[Object(c.q)(a)])])}}};a("737f");const _=m()(y,[["__scopeId","data-v-c5776cc2"]]);t.default=_},"737f":function(e,t,a){"use strict";a("5caf")},8549:function(e,t,a){},9148:function(e,t,a){"use strict";a("1b8f")},"9d80":function(e,t,a){},ae4c:function(e,t,a){},b996:function(e,t,a){"use strict";a("9d80")},c442:function(e,t,a){},ef22:function(e,t,a){"use strict";a.r(t);a("cd17");var c=a("ed3b"),l=a("7a23"),s=a("6c02"),n=a("4820"),b=a("85b1"),d=a("5502");const r={class:"form-box"},i={class:"form-title"},o=Object(l.p)("内部"),j=Object(l.p)("外部"),u=Object(l.p)("外包"),O=Object(l.p)("其他"),p={class:"form-handle"},m=Object(l.p)("保存"),f=Object(l.p)("   "),v=Object(l.p)("取消"),g={key:0},h=Object(l.p)("删除用户组");var y={__name:"index",setup(e){let t=Object(d.b)();const a=Object(s.c)(),y=Object(l.M)(),{leaderList:_,fetchLeaderUser:q,memberList:k,fetchMemberUser:C,editState:w,isEdit:L,groupId:S,formState:x,resetData:N,initData:X}=function(){let e=Object(l.L)({leaderList:[],memberList:[]}),t=Object(l.M)(!1),a=Object(l.M)(""),c=Object(l.L)({leaderArr:[],memberArr:[]}),s=0,d=Object(l.L)({list:[],fetching:!1}),r=0,i=Object(l.L)({list:[],fetching:!1});const o=Object(b.a)(e=>{s+=1;const t=s;d.list=[],d.fetching=!0,Object(n.h)({userName:e}).then(e=>{if(e.success){if(t!==s)return;if(e.data){const t=e.data.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName}));d.list=t}d.fetching=!1}})},300),j=Object(b.a)(e=>{r+=1;const t=r;i.list=[],i.fetching=!0,Object(n.h)({userName:e}).then(e=>{if(e.success){if(t!==r)return;if(e.data){const t=e.data.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName,id:null}));i.list=t}else i.list=[];i.fetching=!1}})},300);return{leaderList:d,fetchLeaderUser:o,memberList:i,fetchMemberUser:j,editState:c,formState:e,isEdit:t,groupId:a,resetData:()=>{e.name="",e.introduction="",e.type="",t.value=!1},initData:l=>{a.value=l,Object(n.c)(l).then(t=>{t.success&&(e.name=t.data.name,e.introduction=t.data.introduction,e.type=""+t.data.type,e.leaderList=t.data.leaderList.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName})),e.memberList=t.data.memberList.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName})),c.leaderArr=e.leaderList,c.memberArr=e.memberList)}),t.value=!0}}}(),I=Object(b.a)(()=>{y.value.validateFields().then(e=>{const c=Object.assign({},e,{type:parseInt(e.type),leaderList:w.leaderArr,memberList:w.memberArr});L.value?(c.id=S.value,Object(n.g)(c).then(e=>{e.success&&(a.push("/userGroup/userList/"+S.value),t.dispatch("getGroupListActions"))})):Object(n.f)(c).then(e=>{e.success&&(a.push("/userGroup/userList/"+e.data),t.dispatch("getGroupListActions"))})}).catch(e=>{})},300),z=()=>{a.push("/userGroup/groupEdit")},U=()=>{c.a.confirm({title:"删除用户组",icon:Object(l.q)(Object(l.Q)("ExclamationCircleOutlined"),{style:"color: #469ffb;"},null),content:"是否删除该用户组",onOk(){Object(n.b)(a.currentRoute.value.params.id).then(e=>{a.go("/userGroup/groupEdit")})},onCancel(){}})},T=e=>{const t=w.leaderArr.findIndex(t=>t.value===e.key);w.leaderArr.splice(t,1)},D=(e,t)=>{w.leaderArr.push(t)},M=e=>{const t=w.memberArr.findIndex(t=>t.value===e.key);w.memberArr.splice(t,1)},Q=(e,t)=>{w.memberArr.push(t)};return Object(l.ab)(()=>a.currentRoute.value.params.id,e=>{e&&a.currentRoute.value.path.indexOf("groupEdit")>-1?(N(),X(e)):N()},{immediate:!0}),(e,t)=>{const a=Object(l.Q)("a-input"),c=Object(l.Q)("a-form-item"),s=Object(l.Q)("a-textarea"),n=Object(l.Q)("a-radio"),b=Object(l.Q)("a-radio-group"),d=Object(l.Q)("a-spin"),w=Object(l.Q)("a-select"),S=Object(l.Q)("a-form"),N=Object(l.Q)("a-button");return Object(l.H)(),Object(l.m)("div",r,[Object(l.n)("div",i,Object(l.T)(Object(l.X)(L)?"编辑用户组":"添加用户组"),1),Object(l.q)(S,{model:Object(l.X)(x),layout:"vertical",name:"basic",autocomplete:"off",ref_key:"formRef",ref:y},{default:Object(l.cb)(()=>[Object(l.q)(c,{label:"名称",name:"name",rules:[{required:!0,message:"请填写用户组名称!"}]},{default:Object(l.cb)(()=>[Object(l.q)(a,{value:Object(l.X)(x).name,"onUpdate:value":t[0]||(t[0]=e=>Object(l.X)(x).name=e),maxlength:"20",placeholder:"名称长度不能大于20"},null,8,["value"])]),_:1}),Object(l.q)(c,{label:"简介",name:"introduction"},{default:Object(l.cb)(()=>[Object(l.q)(s,{value:Object(l.X)(x).introduction,"onUpdate:value":t[1]||(t[1]=e=>Object(l.X)(x).introduction=e),maxlength:"300",placeholder:"最多输入300字"},null,8,["value"])]),_:1}),Object(l.q)(c,{label:"类型",name:"type",rules:[{required:!0,message:"请选择类型"}]},{default:Object(l.cb)(()=>[Object(l.q)(b,{value:Object(l.X)(x).type,"onUpdate:value":t[2]||(t[2]=e=>Object(l.X)(x).type=e)},{default:Object(l.cb)(()=>[Object(l.q)(n,{value:"1"},{default:Object(l.cb)(()=>[o]),_:1}),Object(l.q)(n,{value:"2"},{default:Object(l.cb)(()=>[j]),_:1}),Object(l.q)(n,{value:"3"},{default:Object(l.cb)(()=>[u]),_:1}),Object(l.q)(n,{value:"4"},{default:Object(l.cb)(()=>[O]),_:1})]),_:1},8,["value"])]),_:1}),Object(l.q)(c,{name:"leaderList",label:"负责人",rules:[{required:!0,message:"请选择负责人"}]},{default:Object(l.cb)(()=>[Object(l.q)(w,{value:Object(l.X)(x).leaderList,"onUpdate:value":t[3]||(t[3]=e=>Object(l.X)(x).leaderList=e),mode:"multiple","label-in-value":"",placeholder:"请选择负责人",style:{width:"100%"},"filter-option":!1,"not-found-content":Object(l.X)(_).fetching?void 0:null,options:Object(l.X)(_).list,onSearch:Object(l.X)(q),onSelect:D,onDeselect:T},Object(l.o)({_:2},[Object(l.X)(_).fetching?{name:"notFoundContent",fn:Object(l.cb)(()=>[Object(l.q)(d,{size:"small"})])}:void 0]),1032,["value","not-found-content","options","onSearch"])]),_:1}),Object(l.q)(c,{name:"memberList",label:"成员",rules:[{required:!0,message:"请选择成员"}]},{default:Object(l.cb)(()=>[Object(l.q)(w,{value:Object(l.X)(x).memberList,"onUpdate:value":t[4]||(t[4]=e=>Object(l.X)(x).memberList=e),mode:"multiple","label-in-value":"",placeholder:"请选择成员",style:{width:"100%"},"filter-option":!1,"not-found-content":Object(l.X)(k).fetching?void 0:null,options:Object(l.X)(k).list,onSearch:Object(l.X)(C),onSelect:Q,onDeselect:M},Object(l.o)({_:2},[Object(l.X)(k).fetching?{name:"notFoundContent",fn:Object(l.cb)(()=>[Object(l.q)(d,{size:"small"})])}:void 0]),1032,["value","not-found-content","options","onSearch"])]),_:1})]),_:1},8,["model"]),Object(l.n)("div",p,[Object(l.n)("div",null,[Object(l.q)(N,{onClick:Object(l.X)(I),type:"primary"},{default:Object(l.cb)(()=>[m]),_:1},8,["onClick"]),f,Object(l.q)(N,{onClick:z},{default:Object(l.cb)(()=>[v]),_:1})]),Object(l.X)(L)?(Object(l.H)(),Object(l.m)("div",g,[Object(l.q)(N,{onClick:U,type:"primary",danger:""},{default:Object(l.cb)(()=>[h]),_:1})])):Object(l.l)("",!0)])])}}},_=(a("2466"),a("6b0d"));const q=a.n(_)()(y,[["__scopeId","data-v-161a83b3"]]);t.default=q},ef87:function(e,t,a){},f6bf:function(e,t,a){},f871:function(e,t,a){"use strict";a("ef87")}}]);