(window["webpackJsonp_能力商城控制台"]=window["webpackJsonp_能力商城控制台"]||[]).push([["manifest"],{"06fe":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("319b"),n=a.n(l);const b={class:"nodata-box"},s=[(e=>(Object(c.K)("data-v-44d99e75"),e=e(),Object(c.I)(),e))(()=>Object(c.n)("div",{class:"empty"},[Object(c.n)("img",{src:n.a,alt:""}),Object(c.n)("span",null,"请选择用户组")],-1))];var o={setup(){}},r=(a("57cd"),a("6b0d"));const i=a.n(r)()(o,[["render",function(e,t,a,l,n,o){return Object(c.H)(),Object(c.m)("div",b,s)}],["__scopeId","data-v-44d99e75"]]);t.default=i},"0935":function(e,t,a){},"0fc4":function(e,t,a){"use strict";a("0935")},"12fa":function(e,t,a){},1589:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("6c02");const n={class:"tip-box"};var b={__name:"CusTip",props:{message:{type:String,default:""}},setup(e){const t=e;return Object(c.W)(t),(t,a)=>(Object(c.H)(),Object(c.m)("div",n,Object(c.T)(e.message),1))}},s=(a("0fc4"),a("6b0d")),o=a.n(s);var r=o()(b,[["__scopeId","data-v-666a7bcc"]]),i=a("47ce"),d=a("e9d5");const u=[{label:"默认排序",value:"1"},{label:"所属组织",value:"2"},{label:"加入时间",value:"3"}],O=e=>(Object(c.K)("data-v-17e46fd0"),e=e(),Object(c.I)(),e),j={class:"list-head"},p=["title"],m=O(()=>Object(c.n)("div",{class:"cus-input"},null,-1)),f={class:"right-handle"},g=Object(c.p)(" 排序: "),v=O(()=>Object(c.n)("span",{class:"add-label"},"添加成员",-1)),h=Object(c.p)("      "),y=Object(c.p)("批量删除");var _={__name:"listHeadCom",props:{titleName:{type:String,default:""}},emits:["patchDelete","getList","addUser"],setup(e,t){let{emit:a}=t;const l=e,n=Object(c.r)({components:{PlusOutlined:i.a,SearchOutlined:d.a}}),{titleName:b}=Object(c.W)(l),s=Object(c.M)("1"),o=Object(c.M)(""),r=()=>{a("addUser")},O=()=>{a("patchDelete")},_=e=>{o.value=e.target.value},q=()=>{a("getList",{sort:s.value,name:o.value})},C=e=>{s.value=e,a("getList",{sort:parseInt(s.value),name:o.value})};return Object(c.W)(n),(e,t)=>{const a=Object(c.Q)("a-input"),l=Object(c.Q)("a-select-option"),n=Object(c.Q)("a-select"),X=Object(c.Q)("a-button");return Object(c.H)(),Object(c.m)("div",j,[Object(c.n)("div",{class:"title",title:Object(c.X)(b)},Object(c.T)(Object(c.X)(b)),9,p),m,Object(c.n)("div",f,[Object(c.q)(a,{value:o.value,"onUpdate:value":t[0]||(t[0]=e=>o.value=e),onChange:_,onPressEnter:q,style:{width:"200px","margin-right":"20px"},placeholder:"搜索成员名称"},{suffix:Object(c.cb)(()=>[Object(c.q)(Object(c.X)(d.a),{onClick:q})]),_:1},8,["value"]),Object(c.n)("div",null,[g,Object(c.q)(n,{ref:"select",value:s.value,"onUpdate:value":t[1]||(t[1]=e=>s.value=e),style:{width:"120px"},onChange:C,class:"sort",getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(u),(e,t)=>(Object(c.H)(),Object(c.k)(l,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),Object(c.q)(X,{onClick:r,type:"primary",class:"add-btn"},{icon:Object(c.cb)(()=>[Object(c.q)(Object(c.X)(i.a))]),default:Object(c.cb)(()=>[v]),_:1}),h,Object(c.q)(X,{onClick:O,class:"btn"},{default:Object(c.cb)(()=>[y]),_:1})])])}}};a("afcf");var q=o()(_,[["__scopeId","data-v-17e46fd0"]]),C=(a("cd17"),a("ed3b")),X=a("96d9"),L=a("4820"),S=a("5502");const w={key:0,class:"selection-handle"},k=Object(c.p)("移出用户组"),x=Object(c.p)("    "),N=Object(c.p)("取消"),U={key:0,class:"table-edit"},D=["onClick"];var I={__name:"listTableCom",props:{selectionShow:{type:Boolean,default:!1},tableLoading:{type:Boolean,default:!1},dataSourceList:{type:Array,default:()=>[]},pagination:{type:Object},titleName:{type:String}},emits:["patchDeleteCancel","getList"],setup(e,t){let{expose:a,emit:l}=t;const n=e;let b=Object(S.b)();const s=[{title:"成员",dataIndex:"realName",key:"realName",width:100},{title:"手机号",dataIndex:"phone",key:"phone",width:120},{title:"邮箱",dataIndex:"email",key:"email",width:150},{title:"员工类型",dataIndex:"type",key:"type",width:90,customRender:e=>{let{text:t}=e;return 0===t?"成员":"负责人"}},{title:"所属组织",dataIndex:"companyName",key:"companyName"},{title:"工作地",dataIndex:"address",key:"address"},{title:"操作",dataIndex:"operation",key:"operation",width:140}],{selectionShow:o,dataSourceList:r,pagination:i,tableLoading:d,titleName:u}=Object(c.W)(n),{appContext:O}=Object(c.s)(),j=Object(c.L)({selectedKeys:[],selectedRowKeys:[]}),p=Object(c.M)(),m=e=>{j.selectedRowKeys=e;const t=r.value.map(e=>e),a=j.selectedKeys.map(e=>e);for(let c=0;c<t.length;c++){const l=a.findIndex(e=>e.id===t[c].id),n=e.findIndex(e=>e===t[c].id);l>-1&&-1===n?a.splice(l,1):-1===l&&n>-1&&a.push(t[c])}j.selectedKeys=a},f=()=>{j.selectedRowKeys=[],j.selectedKeys=[]},g=e=>{l("getList",{page:e.current,pageSize:e.pageSize}),j.selectedRowKeys=j.selectedKeys.map(e=>e.id)},v=e=>{Object(L.a)(e).then(e=>{e.success&&(l("getList",{}),y(),b.dispatch("getGroupListActions"))})},h=()=>{if(!j.selectedKeys.length)return O.config.globalProperties.$message.warning("选中用户组不能为空"),!1;const e=j.selectedKeys[0].realName;C.a.confirm({title:"移出用户组",icon:Object(c.q)(X.a,{style:"color: #469ffb;"},null),content:Object(c.q)("span",null,[Object(c.q)("span",null,`是否将【${e}${j.selectedKeys.length>1?"等":""}`),Object(c.q)("span",{style:"color: #469ffb;"},""+(j.selectedKeys.length>1?j.selectedKeys.length:"")),Object(c.q)("span",null,`${j.selectedKeys.length>1?"人":""}】移出【${u.value}】用户组？`)]),getContainer:()=>p.value,onOk(){const e=j.selectedKeys.map(e=>e.id);v(e)},onCancel(){}})},y=()=>{l("patchDeleteCancel"),f()};return a({clearSelectionData:f}),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-table");return Object(c.H)(),Object(c.m)("div",{id:"user-group-table",ref_key:"userGroupTableRef",ref:p},[Object(c.X)(o)?(Object(c.H)(),Object(c.m)("div",w,[Object(c.n)("div",null,"已经选择"+Object(c.T)(j.selectedKeys.length)+"人",1),Object(c.n)("div",null,[Object(c.q)(a,{onClick:h,size:"small",type:"primary",class:"remove-btn"},{default:Object(c.cb)(()=>[k]),_:1}),x,Object(c.q)(a,{onClick:y,size:"small",class:"remove-btn"},{default:Object(c.cb)(()=>[N]),_:1})])])):Object(c.l)("",!0),Object(c.q)(l,{"row-selection":Object(c.X)(o)?{selectedRowKeys:j.selectedRowKeys,onChange:m}:null,dataSource:Object(c.X)(r),columns:s,loading:Object(c.X)(d),onChange:g,rowKey:e=>e.id,class:"list-table",pagination:{pageSize:Object(c.X)(i).pageSize,pageNum:Object(c.X)(i).page,total:Object(c.X)(i).total,showQuickJumper:!0,showSizeChanger:!0,showTotal:(e,t)=>`共${e}条`,pageSizeOptions:["10","50","100"]}},{bodyCell:Object(c.cb)(e=>{let{column:t,text:a,record:l}=e;return["operation"===t.dataIndex?(Object(c.H)(),Object(c.m)("div",U,[Object(c.n)("span",{onClick:e=>(e=>{C.a.confirm({title:"删除用户组成员",icon:Object(c.q)(X.a,{style:"color: #469ffb;"},null),content:`是否删除成员${e.realName}？`,getContainer:()=>p.value,onOk(){v([e.id])},onCancel(){}})})(l)},"移出用户组",8,D)])):Object(c.l)("",!0)]}),_:1},8,["row-selection","dataSource","loading","rowKey","pagination"])],512)}}};a("af6b");var M=o()(I,[["__scopeId","data-v-3c557250"]]),T=(a("caad"),a("b775"));var Q=a("85b1"),A=a("5b2e"),K=a("5a0c"),P=a.n(K);const H={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{message:"手机号格式不正确",trigger:"blur",pattern:/^1[2-9]\d{9}$/}],type:[{required:!0,message:"请选择员工类型",trigger:"blur"}],credentialsType:[{required:!0,message:"请选择证件类型",trigger:"change"}],credentialsNo:[{required:!0,message:"请输入身份证号",trigger:"blur"},{message:"身份证号格式不正确",trigger:"blur",pattern:/(^\d{18}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/}],email:[{type:"email",required:!0,message:"请输入邮箱",trigger:"blur"}],orgCode:[{required:!0,message:"请选择所属组织",trigger:"change"}]},$={span:6},R={span:18},z=[{label:"合作伙伴",value:1}],E=[{label:"身份证",value:1}],G=Object(c.L)({company:[]}),Y=Object(c.L)({credentialsType:1,type:1,effectiveTime:P()(new Date),invalidTime:P()().add(1,"year").endOf("day")}),F=e=>e<P()(Y.effectiveTime).endOf("day")||e>P()(Y.effectiveTime).add(1,"year").endOf("day"),V=()=>{(async function(e){return Object(T.a)({url:"appStore/v1.0/dashboard/getOrgList",method:"post",data:e})})().then(e=>{G.company=e.data})};const W={id:"new-user-modal",ref:"newUserModal"},B=Object(c.p)(" 保存 "),J=Object(c.p)(" 取消 "),Z={class:"form"},ee=Object(c.p)(" 男 "),te=Object(c.p)(" 女 ");var ae={__name:"AddNewUser",props:{modelVisible:{type:Boolean,default:!1}},emits:["modelCancel"],setup(e,t){let{emit:a}=t;const l=e,{rules:n,labelCol:b,wrapperCol:s,type:o,certificate:r,defForm:i,defState:d,disabledEndDate:u,getOrgListFun:O}={rules:H,labelCol:$,wrapperCol:R,type:z,certificate:E,defForm:Y,defState:G,disabledEndDate:F,getOrgListFun:V},j=Object(c.M)(),{appContext:p}=Object(c.s)(),m=Object(c.i)({get:()=>l.modelVisible,set:()=>{}}),f=Object(Q.a)(()=>{j.value.validateFields().then(e=>{(async function(e){return Object(T.a)({url:"appStore/v1.0/dashboard/addStoreUser",method:"post",data:e})})(Object.assign({},e,{effectiveTime:P()(i.effectiveTime).format("YYYY-MM-DD"),invalidTime:P()(i.invalidTime).format("YYYY-MM-DD")})).then(e=>{e.success?(p.config.globalProperties.$message.success("保存成功"),this.handleCancel()):p.config.globalProperties.$message.error(e.msg)})})},300),g=()=>{j.value.resetFields(),a("modelCancel")};return Object(c.E)(()=>{O()}),Object(c.W)(d),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-input"),O=Object(c.Q)("a-form-item"),p=Object(c.Q)("a-col"),v=Object(c.Q)("a-radio"),h=Object(c.Q)("a-radio-group"),y=Object(c.Q)("a-row"),_=Object(c.Q)("a-select-option"),q=Object(c.Q)("a-select"),C=Object(c.Q)("a-date-picker"),X=Object(c.Q)("a-form"),L=Object(c.Q)("a-modal");return Object(c.H)(),Object(c.m)(c.b,null,[Object(c.n)("div",W,null,512),Object(c.q)(L,{visible:Object(c.X)(m),"onUpdate:visible":t[10]||(t[10]=e=>Object(c.v)(m)?m.value=e:null),title:"添加成员",width:838,onCancel:g,getContainer:()=>e.$refs.newUserModal},{footer:Object(c.cb)(()=>[Object(c.q)(a,{type:"primary",onClick:Object(c.X)(f)},{default:Object(c.cb)(()=>[B]),_:1},8,["onClick"]),Object(c.q)(a,{onClick:g},{default:Object(c.cb)(()=>[J]),_:1})]),default:Object(c.cb)(()=>[Object(c.n)("div",Z,[Object(c.q)(X,{ref_key:"newUserFormRef",ref:j,model:Object(c.X)(i),"label-col":Object(c.X)(b),"wrapper-col":Object(c.X)(s),rules:Object(c.X)(n)},{default:Object(c.cb)(()=>[Object(c.q)(y,null,{default:Object(c.cb)(()=>[Object(c.q)(p,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"姓名：",name:"name"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).name,"onUpdate:value":t[0]||(t[0]=e=>Object(c.X)(i).name=e),placeholder:"请输入姓名",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(p,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"性别：",name:"sex"},{default:Object(c.cb)(()=>[Object(c.q)(h,{value:Object(c.X)(i).sex,"onUpdate:value":t[1]||(t[1]=e=>Object(c.X)(i).sex=e)},{default:Object(c.cb)(()=>[Object(c.q)(v,{value:"2"},{default:Object(c.cb)(()=>[ee]),_:1}),Object(c.q)(v,{value:"1"},{default:Object(c.cb)(()=>[te]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),Object(c.q)(y,null,{default:Object(c.cb)(()=>[Object(c.q)(p,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"手机号：",name:"phone"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).phone,"onUpdate:value":t[2]||(t[2]=e=>Object(c.X)(i).phone=e),placeholder:"请输入手机号",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(p,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"员工类型：",name:"type"},{default:Object(c.cb)(()=>[Object(c.q)(q,{value:Object(c.X)(i).type,"onUpdate:value":t[3]||(t[3]=e=>Object(c.X)(i).type=e),getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(o),(e,t)=>(Object(c.H)(),Object(c.k)(_,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1})]),_:1}),Object(c.q)(y,null,{default:Object(c.cb)(()=>[Object(c.q)(p,{span:6},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"证件号：",name:"credentialsType","label-col":{span:12},"wrapper-col":{span:12}},{default:Object(c.cb)(()=>[Object(c.q)(q,{value:Object(c.X)(i).credentialsType,"onUpdate:value":t[4]||(t[4]=e=>Object(c.X)(i).credentialsType=e),style:{width:"85px"},getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(r),(e,t)=>(Object(c.H)(),Object(c.k)(_,{key:t,value:e.value},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1}),Object(c.q)(p,{span:6},{default:Object(c.cb)(()=>[Object(c.q)(O,{name:"credentialsNo"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).credentialsNo,"onUpdate:value":t[5]||(t[5]=e=>Object(c.X)(i).credentialsNo=e),style:{width:"190px"},placeholder:"请输入身份证号",allowClear:""},null,8,["value"])]),_:1})]),_:1}),Object(c.q)(p,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"邮箱号码：",name:"email"},{default:Object(c.cb)(()=>[Object(c.q)(l,{value:Object(c.X)(i).email,"onUpdate:value":t[6]||(t[6]=e=>Object(c.X)(i).email=e),placeholder:"请输入邮箱号码",allowClear:"",style:{width:"290px"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),Object(c.q)(y,null,{default:Object(c.cb)(()=>[Object(c.q)(p,{span:24},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"所属组织：",name:"orgCode","label-col":{span:3},"wrapper-col":{span:21}},{default:Object(c.cb)(()=>[Object(c.q)(q,{value:Object(c.X)(i).orgCode,"onUpdate:value":t[7]||(t[7]=e=>Object(c.X)(i).orgCode=e),style:{width:"99%"},placeholder:"请选择",getPopupContainer:e=>e.parentNode},{default:Object(c.cb)(()=>[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(d).company,(e,t)=>(Object(c.H)(),Object(c.k)(_,{key:t,value:e.orgCode},{default:Object(c.cb)(()=>[Object(c.p)(Object(c.T)(e.orgName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","getPopupContainer"])]),_:1})]),_:1})]),_:1}),Object(c.q)(y,null,{default:Object(c.cb)(()=>[Object(c.q)(p,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"生效时间：",name:"effectiveTime"},{default:Object(c.cb)(()=>[Object(c.q)(C,{value:Object(c.X)(i).effectiveTime,"onUpdate:value":t[8]||(t[8]=e=>Object(c.X)(i).effectiveTime=e),format:"YYYY-MM-DD",style:{width:"290px"},disabled:"",getPopupContainer:e=>e.parentNode},null,8,["value","getPopupContainer"])]),_:1})]),_:1}),Object(c.q)(p,{span:12},{default:Object(c.cb)(()=>[Object(c.q)(O,{label:"失效时间：",name:"invalidTime"},{default:Object(c.cb)(()=>[Object(c.q)(C,{value:Object(c.X)(i).invalidTime,"onUpdate:value":t[9]||(t[9]=e=>Object(c.X)(i).invalidTime=e),format:"YYYY-MM-DD",style:{width:"290px"},"disabled-date":Object(c.X)(u),getPopupContainer:e=>e.parentNode},null,8,["value","disabled-date","getPopupContainer"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])])]),_:1},8,["visible","getContainer"])],64)}}};a("c162");var ce=o()(ae,[["__scopeId","data-v-6ecccb51"]]);const le=e=>(Object(c.K)("data-v-3e29f268"),e=e(),Object(c.I)(),e),ne={id:"add-user-box",ref:"addUserBox"},be=Object(c.p)(" 取消 "),se=Object(c.p)(" 添加 "),oe=le(()=>Object(c.n)("p",{class:"notice"},"添加成功后，对方将收到一条已加入项目的通知",-1)),re=Object(c.p)(" 从集团成员中选择（如想添加的成员不属于本集团，请点击"),ie=Object(c.p)("） "),de=le(()=>Object(c.n)("div",{class:"title"},"成员添加",-1)),ue={class:"userContent"};var Oe={__name:"index",props:{addUserVisible:{type:Boolean,default:!1}},emits:["closeAddUserModal","addNewUserEmit"],setup(e,t){let{emit:a}=t;const n=e,b=Object(c.r)({components:{AddNewUser:ce}}),s=Object(c.i)({get:()=>n.addUserVisible,set:()=>{}});let o=Object(S.b)();const r=Object(c.M)(),i=Object(l.c)(),d=Object(c.L)({targetKeys:[],memberData:[]});let u=[],O=[],j=Object(c.M)(!1);const p=[{dataIndex:"fullName",title:"成员名"},{dataIndex:"deptName",title:"部门"},{dataIndex:"position",title:"职务"},{dataIndex:"phone",title:"手机号"}],{appContext:m}=Object(c.s)(),f=()=>{a("closeAddUserModal")},g=()=>{if(O.length<=0)m.config.globalProperties.$message.warning("请添加成员");else{(async function(e){return Object(T.a)({url:"appStore/v1.0/dashboard/postMemberGroupMember",method:"post",data:e})})({memberList:O.map(e=>Object.assign({},e,{departmentLeader:e.fullName,dMobilePhoneNum:e.phone,jobName:e.position,dEmail:e.email})),groupId:i.currentRoute.value.params.id}).then(e=>{e.success?(m.config.globalProperties.$message.success("添加成员成功"),o.dispatch("getGroupListActions"),a("addNewUserEmit"),f()):m.config.globalProperties.$message.error(e.msg)})}},v=()=>{j.value=!0},h=()=>{j.value=!1},y=e=>{d.targetKeys=e,d.targetKeys.forEach(e=>{d.memberData.forEach(t=>{if(t.key===e){if(O.some(t=>t.key===e))return;O.push(t)}})})},_=Object(Q.a)((e,t)=>{if("left"===e){if(!t)return;(async function(e){return Object(T.a)({url:"appStore/v1.0/dashboard/queryUserByFullName",method:"post",data:e})})({fullName:t}).then(e=>{1*e.code==200?(u=e.data,u.forEach(e=>{e.key=e.userId,O=O.filter(t=>t.key!==e.key)}),d.memberData=u.concat(O)):m.config.globalProperties.$message.error(e.msg)})}},100),q=e=>{let{selectedKeys:t,onItemSelectAll:a,onItemSelect:c}=e;return{onSelectAll:(e,c)=>{const l=c.map(e=>{let{key:t}=e;return t}),n=e?Object(A.a)(l,t):Object(A.a)(t,l);a(n,e)},onSelect:(e,t)=>{let{key:a}=e;c(a,t)},selectedRowKeys:t}};return Object(c.W)(b),Object(c.W)(d),(e,t)=>{const a=Object(c.Q)("a-button"),l=Object(c.Q)("a-table"),n=Object(c.Q)("a-transfer"),b=Object(c.Q)("a-modal");return Object(c.H)(),Object(c.m)(c.b,null,[Object(c.n)("div",ne,null,512),Object(c.q)(b,{visible:Object(c.X)(s),"onUpdate:visible":t[0]||(t[0]=e=>Object(c.v)(s)?s.value=e:null),title:"添加项目成员",width:1200,class:"user",maskClosable:!1,getContainer:()=>e.$refs.addUserBox,onCancel:f},{footer:Object(c.cb)(()=>[Object(c.q)(a,{onClick:f},{default:Object(c.cb)(()=>[be]),_:1}),Object(c.q)(a,{type:"primary",onClick:g},{default:Object(c.cb)(()=>[se]),_:1})]),default:Object(c.cb)(()=>[oe,Object(c.n)("p",{class:"notice"},[re,Object(c.n)("span",{onClick:v},"添加成员"),ie]),de,Object(c.n)("div",ue,[Object(c.q)(n,{ref_key:"transfer",ref:r,"data-source":d.memberData,"target-keys":d.targetKeys,showSearch:"","filter-option":(e,t)=>-1!==t.fullName.indexOf(e),onChange:y,onSearch:Object(c.X)(_)},{children:Object(c.cb)(t=>{let{selectedKeys:a,filteredItems:n,onItemSelectAll:b,onItemSelect:s}=t;return[Object(c.q)(l,{"row-selection":q({selectedKeys:a,onItemSelectAll:b,onItemSelect:s}),columns:p,"data-source":n,size:"small","custom-row":t=>{let{key:c}=t;return{on:{click:()=>{e.itemSelect(c,!a.includes(c))}}}}},null,8,["row-selection","data-source","custom-row"])]}),_:1},8,["data-source","target-keys","filter-option","onSearch"])]),Object(c.q)(ce,{modelVisible:Object(c.X)(j),onModelCancel:h},null,8,["modelVisible"])]),_:1},8,["visible","getContainer"])],64)}}};a("f371");var je=o()(Oe,[["__scopeId","data-v-3e29f268"]]);const pe={class:"list-box"};var me={__name:"index",setup(e){const t=Object(c.r)({components:{ListHeadCom:q,CusTip:r,ListTableCom:M,addUser:je}}),a=Object(l.c)();let n={};const{selectionShow:b,addUserVisible:s,defState:o,listTableRef:i,getDetail:d,getList:u,patchDelete:O,patchDeleteCancel:j,clearSelectionData:p,addUserHandle:m,closeAddUserModal:f}=function(){const e=Object(c.M)(!1),t=Object(c.M)(!1),a=Object(c.M)(),l=Object(c.L)({dataSourceList:[],pagination:{total:0,page:1,pageSize:10},tableLoading:!1,titleName:""}),n=()=>{e.value=!1};return{selectionShow:e,addUserVisible:t,defState:l,listTableRef:a,getDetail:e=>{Object(L.c)(e).then(e=>{e.success&&(l.titleName=e.data.name)})},getList:e=>{l.tableLoading=!0,Object(L.e)(e).then(e=>{l.tableLoading=!1,e.success&&(l.dataSourceList=e.data.result,l.pagination.total=e.data.total,l.pagination.pageSize=e.data.pageSize,l.pagination.page=e.data.page)})},patchDelete:()=>{e.value=!0},patchDeleteCancel:n,clearSelectionData:()=>{n(),a.value&&a.value.clearSelectionData()},addUserHandle:()=>{t.value=!0},closeAddUserModal:()=>{t.value=!1}}}(),g=e=>{p(),n=e;const t=Object.assign({},{page:o.pagination.page,pageSize:o.pagination.pageSize,groupId:a.currentRoute.value.params.id},e);u(t)},v=e=>{const t=Object.assign({},n,{page:e.page||o.pagination.page,pageSize:e.pageSize||o.pagination.pageSize,groupId:a.currentRoute.value.params.id});u(t)},h=()=>{g({sort:"1"})};return Object(c.ab)(()=>a.currentRoute.value.params.id,e=>{e&&a.currentRoute.value.path.indexOf("userList")>-1&&(o.dataSourceList=[],o.pagination={total:0,page:1,pageSize:o.pagination.pageSize},p(),d(e),g({sort:"1"}))},{immediate:!0}),Object(c.W)(t),Object(c.W)(o),(e,t)=>(Object(c.H)(),Object(c.m)("div",pe,[Object(c.q)(q,{titleName:Object(c.X)(o).titleName,onPatchDelete:Object(c.X)(O),onGetList:g,onAddUser:Object(c.X)(m)},null,8,["titleName","onPatchDelete","onAddUser"]),Object(c.q)(r,{message:"为保证企业信息安全，请及时将岗位变动与离职成员进行管理。"}),Object(c.q)(M,{ref_key:"listTableRef",ref:i,titleName:Object(c.X)(o).titleName,dataSourceList:Object(c.X)(o).dataSourceList,tableLoading:Object(c.X)(o).tableLoading,pagination:Object(c.X)(o).pagination,selectionShow:Object(c.X)(b),onPatchDeleteCancel:Object(c.X)(j),onGetList:v},null,8,["titleName","dataSourceList","tableLoading","pagination","selectionShow","onPatchDeleteCancel"]),Object(c.q)(je,{addUserVisible:Object(c.X)(s),onAddNewUserEmit:h,onCloseAddUserModal:Object(c.X)(f)},null,8,["addUserVisible","onCloseAddUserModal"])]))}};a("d883");const fe=o()(me,[["__scopeId","data-v-44ff1546"]]);t.default=fe},"17e0":function(e,t,a){},"319b":function(e,t,a){e.exports=a.p+"static/img/search_empty.81c0a8f2.png"},"35b0":function(e,t,a){},"57cd":function(e,t,a){"use strict";a("c442")},"5caf":function(e,t,a){},"621a":function(e,t,a){},"65c6":function(e,t,a){"use strict";a("35b0")},"6fb5":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("3cac"),n=a("6c02"),b=a("5502");const s={class:"left-box"},o={class:"left-handle"},r={class:"title"},i={class:"group-box"},d=["onClick"],u={class:"name"},O={class:"count"};var j={__name:"leftMenu",setup(e){const t=Object(n.c)();let a=Object(b.b)();const j=Object(c.r)({components:{FormOutlined:l.a}});let p=Object(c.L)({data:[]});const m=()=>{t.push("/userGroup/groupCreate")},f=e=>{t.push("/userGroup/groupEdit/"+e)},g=e=>{t.push("/userGroup/userList/"+e)};return Object(c.ab)(()=>a.state.userGroupStore.groupList,(e,t)=>{p.data=e},{deep:!0}),Object(c.W)(j),(e,t)=>(Object(c.H)(),Object(c.m)("div",s,[Object(c.n)("div",o,[Object(c.n)("div",r,"用户组 （"+Object(c.T)(Object(c.X)(p).data.length)+"）",1),Object(c.n)("div",{onClick:m,class:"add-btn"},"新增用户组")]),Object(c.n)("div",i,[(Object(c.H)(!0),Object(c.m)(c.b,null,Object(c.O)(Object(c.X)(p).data,(e,t)=>(Object(c.H)(),Object(c.m)("div",{key:t,onClick:t=>g(e.id),class:"group-item"},[Object(c.n)("div",u,Object(c.T)(e.name),1),Object(c.q)(Object(c.X)(l.a),{onClick:Object(c.eb)(t=>f(e.id),["stop","prevent"]),class:"edit-icon"},null,8,["onClick"]),Object(c.n)("div",O,Object(c.T)(e.memberTotal),1)],8,d))),128))])]))}},p=(a("65c6"),a("6b0d")),m=a.n(p);var f=m()(j,[["__scopeId","data-v-1f33b946"]]);const g={id:"user-group"},v={class:"left-menu"},h={class:"right-content"};var y={__name:"index",setup(e){let t=Object(b.b)();return Object(c.E)(()=>{t.dispatch("getGroupListActions")}),(e,t)=>{const a=Object(c.Q)("router-view");return Object(c.H)(),Object(c.m)("div",g,[Object(c.n)("div",v,[Object(c.q)(Object(c.X)(f))]),Object(c.n)("div",h,[Object(c.q)(a)])])}}};a("737f");const _=m()(y,[["__scopeId","data-v-c5776cc2"]]);t.default=_},"737f":function(e,t,a){"use strict";a("5caf")},"888b":function(e,t,a){},a799:function(e,t,a){"use strict";a("c63a")},af6b:function(e,t,a){"use strict";a("ee82")},afcf:function(e,t,a){"use strict";a("12fa")},c162:function(e,t,a){"use strict";a("621a")},c442:function(e,t,a){},c63a:function(e,t,a){},d883:function(e,t,a){"use strict";a("888b")},dc75:function(e,t,a){"use strict";a.r(t);var c=a("7a23");var l={},n=a("6b0d");const b=a.n(n)()(l,[["render",function(e,t,a,l,n,b){return Object(c.H)(),Object(c.m)("div",null,"页面走丢了")}]]);t.default=b},ee82:function(e,t,a){},ef22:function(e,t,a){"use strict";a.r(t);a("cd17");var c=a("ed3b"),l=a("7a23"),n=a("6c02"),b=a("4820"),s=a("85b1"),o=a("5502");const r={class:"form-title"},i=Object(l.p)("内部"),d=Object(l.p)("外部"),u=Object(l.p)("外包"),O=Object(l.p)("其他"),j={class:"form-handle"},p=Object(l.p)("保存"),m=Object(l.p)("   "),f=Object(l.p)("取消"),g={key:0},v=Object(l.p)("删除用户组");var h={__name:"index",setup(e){let t=Object(o.b)();const a=Object(n.c)(),h=Object(l.M)(),y=Object(l.M)(),{leaderList:_,fetchLeaderUser:q,memberList:C,fetchMemberUser:X,editState:L,isEdit:S,groupId:w,formState:k,resetData:x,initData:N,handleLeaderSelect:U,handleLeaderDeselect:D,handleMemberSelect:I,handleMemberDeselect:M}=function(){let e=Object(l.L)({leaderList:[],memberList:[]}),t=Object(l.M)(!1),a=Object(l.M)(""),c=Object(l.L)({leaderArr:[],memberArr:[]}),n=0,o=Object(l.L)({list:[],fetching:!1}),r=0,i=Object(l.L)({list:[],fetching:!1});const d=Object(s.a)(e=>{n+=1;const t=n;o.list=[],o.fetching=!0,Object(b.h)({userName:e}).then(e=>{if(e.success){if(t!==n)return;if(e.data){const t=e.data.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName}));o.list=t}o.fetching=!1}})},300),u=Object(s.a)(e=>{r+=1;const t=r;i.list=[],i.fetching=!0,Object(b.h)({userName:e}).then(e=>{if(e.success){if(t!==r)return;if(e.data){const t=e.data.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName,id:null}));i.list=t}else i.list=[];i.fetching=!1}})},300);return{leaderList:o,fetchLeaderUser:d,memberList:i,fetchMemberUser:u,editState:c,formState:e,isEdit:t,groupId:a,resetData:()=>{e.name="",e.introduction="",e.type="",t.value=!1},initData:l=>{a.value=l,Object(b.c)(l).then(t=>{t.success&&(e.name=t.data.name,e.introduction=t.data.introduction,e.type=""+t.data.type,e.leaderList=t.data.leaderList.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName})),e.memberList=t.data.memberList.map(e=>Object.assign({},e,{label:`${e.departmentLeader} （${e.userName}）`,value:e.userName})),c.leaderArr=e.leaderList,c.memberArr=e.memberList)}),t.value=!0},handleLeaderSelect:(e,t)=>{c.leaderArr.push(t)},handleLeaderDeselect:e=>{const t=c.leaderArr.findIndex(t=>t.value===e.key);c.leaderArr.splice(t,1)},handleMemberSelect:(e,t)=>{c.memberArr.push(t)},handleMemberDeselect:e=>{const t=c.memberArr.findIndex(t=>t.value===e.key);c.memberArr.splice(t,1)}}}(),T=Object(s.a)(()=>{h.value.validateFields().then(e=>{const c=Object.assign({},e,{type:parseInt(e.type),leaderList:L.leaderArr,memberList:L.memberArr});S.value?(c.id=w.value,Object(b.g)(c).then(e=>{e.success&&(a.push("/userGroup/userList/"+w.value),t.dispatch("getGroupListActions"))})):Object(b.f)(c).then(e=>{e.success&&(a.push("/userGroup/userList/"+e.data),t.dispatch("getGroupListActions"))})}).catch(e=>{})},300),Q=()=>{a.push("/userGroup/groupEdit")},A=()=>{c.a.confirm({title:"删除用户组",icon:Object(l.q)(Object(l.Q)("ExclamationCircleOutlined"),{style:"color: #469ffb;"},null),content:"是否删除该用户组",getContainer:()=>y.value,onOk(){Object(b.b)(a.currentRoute.value.params.id).then(e=>{a.go("/userGroup/groupEdit")})},onCancel(){}})};return Object(l.ab)(()=>a.currentRoute.value.params.id,e=>{e&&a.currentRoute.value.path.indexOf("groupEdit")>-1?(x(),N(e)):x()},{immediate:!0}),(e,t)=>{const a=Object(l.Q)("a-input"),c=Object(l.Q)("a-form-item"),n=Object(l.Q)("a-textarea"),b=Object(l.Q)("a-radio"),s=Object(l.Q)("a-radio-group"),o=Object(l.Q)("a-spin"),L=Object(l.Q)("a-select"),w=Object(l.Q)("a-form"),x=Object(l.Q)("a-button");return Object(l.H)(),Object(l.m)("div",{id:"user-group-form",ref_key:"userGroupFormRef",ref:y,class:"form-box"},[Object(l.n)("div",r,Object(l.T)(Object(l.X)(S)?"编辑用户组":"添加用户组"),1),Object(l.q)(w,{model:Object(l.X)(k),layout:"vertical",name:"basic",autocomplete:"off",ref_key:"formRef",ref:h},{default:Object(l.cb)(()=>[Object(l.q)(c,{label:"名称",name:"name",rules:[{required:!0,message:"请填写用户组名称!"}]},{default:Object(l.cb)(()=>[Object(l.q)(a,{value:Object(l.X)(k).name,"onUpdate:value":t[0]||(t[0]=e=>Object(l.X)(k).name=e),maxlength:"20",placeholder:"名称长度不能大于20"},null,8,["value"])]),_:1}),Object(l.q)(c,{label:"简介",name:"introduction"},{default:Object(l.cb)(()=>[Object(l.q)(n,{value:Object(l.X)(k).introduction,"onUpdate:value":t[1]||(t[1]=e=>Object(l.X)(k).introduction=e),maxlength:"300",placeholder:"最多输入300字"},null,8,["value"])]),_:1}),Object(l.q)(c,{label:"类型",name:"type",rules:[{required:!0,message:"请选择类型"}]},{default:Object(l.cb)(()=>[Object(l.q)(s,{value:Object(l.X)(k).type,"onUpdate:value":t[2]||(t[2]=e=>Object(l.X)(k).type=e)},{default:Object(l.cb)(()=>[Object(l.q)(b,{value:"1"},{default:Object(l.cb)(()=>[i]),_:1}),Object(l.q)(b,{value:"2"},{default:Object(l.cb)(()=>[d]),_:1}),Object(l.q)(b,{value:"3"},{default:Object(l.cb)(()=>[u]),_:1}),Object(l.q)(b,{value:"4"},{default:Object(l.cb)(()=>[O]),_:1})]),_:1},8,["value"])]),_:1}),Object(l.q)(c,{name:"leaderList",label:"负责人",rules:[{required:!0,message:"请选择负责人"}]},{default:Object(l.cb)(()=>[Object(l.q)(L,{value:Object(l.X)(k).leaderList,"onUpdate:value":t[3]||(t[3]=e=>Object(l.X)(k).leaderList=e),mode:"multiple","label-in-value":"",placeholder:"请选择负责人",style:{width:"100%"},"filter-option":!1,"not-found-content":Object(l.X)(_).fetching?void 0:null,options:Object(l.X)(_).list,getPopupContainer:e=>e.parentNode,onSearch:Object(l.X)(q),onSelect:Object(l.X)(U),onDeselect:Object(l.X)(D)},Object(l.o)({_:2},[Object(l.X)(_).fetching?{name:"notFoundContent",fn:Object(l.cb)(()=>[Object(l.q)(o,{size:"small"})])}:void 0]),1032,["value","not-found-content","options","getPopupContainer","onSearch","onSelect","onDeselect"])]),_:1}),Object(l.q)(c,{name:"memberList",label:"成员",rules:[{required:!0,message:"请选择成员"}]},{default:Object(l.cb)(()=>[Object(l.q)(L,{value:Object(l.X)(k).memberList,"onUpdate:value":t[4]||(t[4]=e=>Object(l.X)(k).memberList=e),mode:"multiple","label-in-value":"",placeholder:"请选择成员",style:{width:"100%"},"filter-option":!1,"not-found-content":Object(l.X)(C).fetching?void 0:null,options:Object(l.X)(C).list,getPopupContainer:e=>e.parentNode,onSearch:Object(l.X)(X),onSelect:Object(l.X)(I),onDeselect:Object(l.X)(M)},Object(l.o)({_:2},[Object(l.X)(C).fetching?{name:"notFoundContent",fn:Object(l.cb)(()=>[Object(l.q)(o,{size:"small"})])}:void 0]),1032,["value","not-found-content","options","getPopupContainer","onSearch","onSelect","onDeselect"])]),_:1})]),_:1},8,["model"]),Object(l.n)("div",j,[Object(l.n)("div",null,[Object(l.q)(x,{onClick:Object(l.X)(T),type:"primary"},{default:Object(l.cb)(()=>[p]),_:1},8,["onClick"]),m,Object(l.q)(x,{onClick:Q},{default:Object(l.cb)(()=>[f]),_:1})]),Object(l.X)(S)?(Object(l.H)(),Object(l.m)("div",g,[Object(l.q)(x,{onClick:A,type:"primary",danger:""},{default:Object(l.cb)(()=>[v]),_:1})])):Object(l.l)("",!0)])],512)}}},y=(a("a799"),a("6b0d"));const _=a.n(y)()(h,[["__scopeId","data-v-bb2e05ac"]]);t.default=_},f371:function(e,t,a){"use strict";a("17e0")}}]);